<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#FFFFFF"><title>The Code Citadel - The Fall of the Keep &#183; Andrey Kumanyaev</title><meta name=title content="The Code Citadel - The Fall of the Keep &#183; Andrey Kumanyaev"><script type=text/javascript src=https://zzet.org/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="></script><link type=text/css rel=stylesheet href=https://zzet.org/css/main.bundle.min.100caa677b4bc416cdd884107b203b4869f9b413a19aa57d12069fb826f1abe9.css integrity="sha256-EAyqZ3tLxBbN2IQQeyA7SGn5tBOhmqV9EgafuCbxq+k="><meta name=description content="
      
        
      
    "><meta name=robots content="all"><link rel=canonical href=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/"><meta property="og:site_name" content="Andrey Kumanyaev"><meta property="og:title" content="The Code Citadel - The Fall of the Keep"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-31T00:00:00+00:00"><meta property="article:modified_time" content="2026-01-31T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="The Code Citadel - The Fall of the Keep"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleSection":"","name":"The Code Citadel - The Fall of the Keep","headline":"The Code Citadel - The Fall of the Keep","inLanguage":"en","url":"https:\/\/zzet.org\/posts\/the-code-citadel\/1-the-fall-of-the-keep\/","author":{"@type":"Person","name":"Andrey Kumanyaev"},"copyrightYear":"2026","dateCreated":"2026-01-31T00:00:00\u002b00:00","datePublished":"2026-01-31T00:00:00\u002b00:00","dateModified":"2026-01-31T00:00:00\u002b00:00","mainEntityOfPage":"true","wordCount":"3558"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://zzet.org/","name":"","position":1},{"@type":"ListItem","item":"https://zzet.org/posts/","name":"","position":2},{"@type":"ListItem","item":"https://zzet.org/posts/the-code-citadel/","name":"The Code Citadel the Architectural Codex","position":3},{"@type":"ListItem","name":"The Code Citadel the Fall of the Keep","position":4}]}</script><meta name=author content="Andrey Kumanyaev"><link href=https://github.com/zzet rel=me><link href=https://x.com/zzetorg rel=me><link href=https://www.reddit.com/user/zzet/ rel=me><link href=https://www.linkedin.com/in/andrey-kumanyaev/ rel=me><script async src="https://www.googletagmanager.com/gtag/js?id=G-VGXR3BQCTQ"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VGXR3BQCTQ")}</script></head><body class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden"><nav class="flex items-start justify-between sm:items-center"><div class="flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>Andrey Kumanyaev</a></div><ul class="flex list-none flex-col text-end sm:flex-row"><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/about/ title=About><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">About</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/posts/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Blog</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=https://github.com/zzet title target=_blank><span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=https://x.com/zzetorg title target=_blank><span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg></span></span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"></li></ul></nav></header><div class="relative flex grow flex-col"><main id=main-content class=grow><article><header class=max-w-prose><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=https://zzet.org/></a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=https://zzet.org/posts/>posts</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=https://zzet.org/posts/the-code-citadel/>The Code Citadel - The Architectural Codex</a><span class="px-1 text-primary-500">/</span></li><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/>The Code Citadel - The Fall of the Keep</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">The Code Citadel - The Fall of the Keep</h1><div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2026-01-31 00:00:00 +0000 UTC">31 January 2026</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">17 mins</span><span class="px-2 text-primary-500">&#183;</span>
<span class=mb-[2px]><a href=https://github.com/zzet.github.com/content/posts/the-code-citadel/1-the-fall-of-the-keep/index.md class="text-lg hover:text-primary-500" rel="noopener noreferrer" target=_blank title="Edit content"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M490.3 40.4c21.9 21.87 21.9 57.33.0 79.2l-30 30.1-98-97.98 30.1-30.06C414.3-.2135 449.7-.2135 471.6 21.66L490.3 40.4zM172.4 241.7 339.7 74.34l98 97.96L270.3 339.6C264.2 345.8 256.7 350.4 248.4 353.2l-88.8 29.6C150.1 385.6 141.5 383.4 135 376.1 128.6 370.5 126.4 361 129.2 352.4l29.6-88.8C161.6 255.3 166.2 247.8 172.4 241.7v0zM192 63.1c17.7.0 32 15.23 32 32 0 18.6-14.3 32-32 32H96c-17.67.0-32 15.2-32 32V416c0 17.7 14.33 32 32 32H352c17.7.0 32-14.3 32-32V319.1c0-16.8 14.3-32 32-32s32 15.2 32 32V416c0 53-43 96-96 96H96c-53.02.0-96-43-96-96V159.1c0-53 42.98-96 96-96h96z"/></svg></span></a></span></div></div></header><section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row"><div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8"><div class="toc pe-5 lg:sticky lg:top-10 print:hidden"><details open class="-ms-5 mt-0 overflow-hidden rounded-lg ps-5"><summary class="block cursor-pointer bg-neutral-100 py-1 ps-5 text-lg font-semibold text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="border-s border-dotted border-neutral-300 py-2 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#prologue-the-wisdom-of-the-motte><strong>Prologue: The Wisdom of the Motte</strong></a></li><li><a href=#the-age-of-stone-the-majestic-monolith>The Age of Stone: The Majestic Monolith</a><ul><li><a href=#the-great-hall-the-luxury-of-local-calls>The Great Hall: The Luxury of Local Calls</a></li><li><a href=#the-royal-treasury-the-absolutism-of-acid>The Royal Treasury: The Absolutism of ACID</a></li><li><a href=#the-walls-the-simplicity-of-defense>The Walls: The Simplicity of Defense</a></li><li><a href=#the-joy-of-the-castellan-operational-simplicity>The Joy of the Castellan: Operational Simplicity</a></li></ul></li><li><a href=#the-sprawl-the-crisis-of-the-bailey>The Sprawl: The Crisis of the Bailey</a><ul><li><a href=#the-shantytown-of-dependencies>The Shantytown of Dependencies</a></li><li><a href=#the-stench-of-the-garderobe-technical-debt>The Stench of the Garderobe (Technical Debt)</a></li><li><a href=#the-siege-of-traffic-vertical-scaling-limits>The Siege of Traffic: Vertical Scaling Limits</a></li><li><a href=#the-fear>The Fear</a></li></ul></li><li><a href=#the-decision-to-build-the-bastide>The Decision: To Build the Bastide</a><ul><li><a href=#the-charter-of-the-new-city>The Charter of the New City</a></li><li><a href=#the-trade-off>The Trade-Off</a></li><li><a href=#bonus>Bonus</a></li></ul></li></ul></nav></div></details></div></div><div class="min-h-0 min-w-0 max-w-prose grow"><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Castle-pinnacle_hu_d2268f4158ee95be.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Castle-pinnacle_hu_2c008f0b6b705266.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Castle-pinnacle_hu_78e6a860e57b2e58.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Castle-pinnacle_hu_78e6a860e57b2e58.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=565 class="mx-auto my-0 rounded-md" alt="Motte and Bailey" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Castle-pinnacle_hu_8d793a45d82a1647.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Castle-pinnacle_hu_fd1e68ab0c56e873.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Castle-pinnacle_hu_8d793a45d82a1647.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Castle-pinnacle.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Castle-pinnacle.jpg 1024w" sizes=100vw></picture></figure><p>For centuries, the Castle was the pinnacle of architectural achievement. It stood as a singular, self-contained universe where every vital function - from defense and housing to governance and storage - was tightly integrated behind massive, impenetrable walls.</p><p>Once the foundation was laid and the stone set, the structure defined the landscape, creating a powerful fortress. These imposing structures were built to be immovable and permanent, prioritizing absolute stability. It was an engineering marvel designed to rely on nothing but itself, creating a fortified ecosystem.</p><p>It was the ultimate expression of centralized control, a massive, unified entity that dominated its environment. Inside, life was strictly ordered and interconnected; a change in the royal court rippled instantly through the barracks and the kitchens, just as every stone relied on the one beneath it.</p><p>In the digital realm, we call it the <strong>Monolith</strong>. Like the great Norman Castles or Keeps of the 12th-16th century, the Monolith is a structure of singular purpose and unified strength. It is the &ldquo;Majestic Monolith,&rdquo; a fortress where every component - from the scullery of the data access layer to the high towers of the user interface - resides within a single, impregnable perimeter.</p><p>The advantages of the Castle are undeniable. Governance is absolute; the Castellan (the compiler) knows the location of every servant and every soldier. Resources are shared; the Great Hall serves as a central hub where data is exchanged instantly, with the &ldquo;latency&rdquo; of a whisper across a table. The Treasury (the Database) is a single, locked vault. When gold is moved, it is moved atomically. There is no doubt, no ambiguity, no &ldquo;eventual consistency.&rdquo; The Castle is safe.</p><h2 id=prologue-the-wisdom-of-the-motte class="relative group"><strong>Prologue: The Wisdom of the Motte</strong> <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#prologue-the-wisdom-of-the-motte aria-label=Anchor>#</a></span></h2><p>Every story of any company, any service, or any system begins with an idea, which can be compared to finding the perfect location to build a future fortress.</p><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Start_hu_33a1b93a17d80ab7.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Start_hu_5034af7a4a8287ba.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Start_hu_39a7eb662bae62e8.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Start_hu_39a7eb662bae62e8.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=565 class="mx-auto my-0 rounded-md" alt="Motte and Bailey" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Start_hu_4eddd412a3c6a369.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Start_hu_7a4fdd872ef93478.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Start_hu_4eddd412a3c6a369.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Start.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Start.jpg 1024w" sizes=100vw></picture></figure><p>While, it&rsquo;s an interesting story on how it was built, at the beginning of our story, there was only the <strong>Motte and Bailey</strong> (at least, many of you joined companies where it was already).</p><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Motte_and_Bailey_hu_8a8adf6c0523057b.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Motte_and_Bailey_hu_33e68ad6de04daf7.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Motte_and_Bailey_hu_248b064871164517.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Motte_and_Bailey_hu_248b064871164517.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=559 class="mx-auto my-0 rounded-md" alt="Motte and Bailey" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Motte_and_Bailey_hu_97248ecb89fc5d18.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Motte_and_Bailey_hu_f931f7c5f34e3536.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Motte_and_Bailey_hu_97248ecb89fc5d18.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Motte_and_Bailey.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Motte_and_Bailey.jpg 1024w" sizes=100vw></picture></figure><p>In the landscape of medieval architecture, this was the MVP (Minimum Viable Product). It was a simple earthen mound (the Motte) topped with a wooden tower, surrounded by a defensive palisade (the Bailey). The construction was simple and functional, the only thing needed to perform the main function. In the Motte was the Counting House, with a single, sturdy room. Inside this room sat your entire architecture: a single <strong>Master Clerk</strong> (The Monolith) and his <strong>Great Ledger</strong> (The Database). It did work. It worked perfectly and efficiently.</p><p>Take a look at one of example:</p><p>A client - a wool merchant - enters and asks: &ldquo;<em>What is the rate to ship ten bales of wool from London to Pisa, including tolls and the exchange rate of the Florin?</em>&rdquo;</p><p>The Master Clerk does not need to send a letter to a foreign office. He does not need to wait for a reply. He simply reaches across his desk, opens the <em>Pratica della mercatura</em> (the book of trade rates), looks up the London toll, flips the page to the Pisa exchange rate, and calculates the sum.</p><ul><li><strong>Zero Latency</strong> - the data is within arm&rsquo;s reach (In-Memory/Local Disk). The communication between &ldquo;Pricing&rdquo; and &ldquo;Inventory&rdquo; happens inside the Clerk&rsquo;s head.</li><li><strong>Transactional Integrity</strong> - he writes the deal in the Ledger. If his quill breaks halfway through, he stops. The transaction is either recorded or it isn&rsquo;t. There is no risk that the London office thinks the deal is done while the Pisa office thinks it failed.</li><li><strong>Simple Deployment</strong> - if you need to update the rates, you don&rsquo;t need to coordinate twenty different scribes in twenty different cities. You just hand the Clerk a new book. One Book to One Clerk.</li></ul><p>For a time, the Counting House is not just sufficient; it is magnificent. It is fast, consistent, and cheap.</p><div class="lead !mb-9 text-xl">It was crude, cheap to construct, and undeniably effective.</div><p>In software engineering, this is the early-stage startup. The architecture is a single codebase - a &ldquo;Monolith.&rdquo; Like the Motte, it is designed for survival and speed. We often look back at these early structures with disdain, viewing them as primitive. But we must acknowledge their initial genius. The Motte provided unified governance and absolute clarity of purpose. For a time, it was not just sufficient; it was perfect.</p><hr><h2 id=the-age-of-stone-the-majestic-monolith class="relative group">The Age of Stone: The Majestic Monolith <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-age-of-stone-the-majestic-monolith aria-label=Anchor>#</a></span></h2><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Keep_hu_c226daeaab07925a.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Keep_hu_5e4f152d59d3d213.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Keep_hu_62dcf9c16a991f84.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Keep_hu_62dcf9c16a991f84.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=559 class="mx-auto my-0 rounded-md" alt="The Age of Stone: The Majestic Monolith" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Keep_hu_d118c2ab274e65dc.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Keep_hu_ccd2cc91571ccebe.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Keep_hu_d118c2ab274e65dc.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Keep.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Keep.jpg 1024w" sizes=100vw></picture></figure><p>As the Kingdom and your Company prosper, the Counting House expands. You replace the wood with stone. You build <strong>The Keep</strong>.</p><p>The era of Keeps and Castles, known to historians as the <a href=https://simple.wikipedia.org/wiki/High_Middle_Ages target=_blank rel=noreferrer>High Middle Ages</a>, corresponds most accurately to the era of the <strong>Majestic Monolith</strong>. </p><p>It is easy, in the midst of our modern struggles with distributed complexity, to forget the sheer elegance of the <strong>Great Keep</strong>. It was a masterpiece of vertical integration, a structure where every component - from the scullery (the data access and processing layer) to the high towers of the user interface - resided within a single, impregnable perimeter&mldr; It is a single executable, a unified deployment unit where the Interface, the Search Logic, the Pricing Engine, and the Booking System all reside within the same defensive walls.</p><h3 id=the-great-hall-the-luxury-of-local-calls class="relative group">The Great Hall: The Luxury of Local Calls <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-great-hall-the-luxury-of-local-calls aria-label=Anchor>#</a></span></h3><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Great_hall_hu_2ed243a0adfb957b.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Great_hall_hu_4e178c327570c8e7.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Great_hall_hu_d6e27b43d673d2c3.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Great_hall_hu_d6e27b43d673d2c3.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=559 class="mx-auto my-0 rounded-md" alt="The Great Hall: The Luxury of Local Calls" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Great_hall_hu_7df458061c98526.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Great_hall_hu_c6b9d91ff20bbbda.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Great_hall_hu_7df458061c98526.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Great_hall.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Great_hall.jpg 1024w" sizes=100vw></picture></figure><p>The heart of the Keep is the <strong>Great Hall</strong>. In your travel startup, this is the application runtime.</p><p>Imagine the King (The User) demands a complex itinerary: &ldquo;<em>Find me a route from York to Rome, avoiding the French war zones, with stops at decent inns.</em>&rdquo;</p><p>At the current scale, adding the new capabilities wasn&rsquo;t so difficult, so you&rsquo;ve easily hired the required specialists (added new functionality).</p><p>In a distributed system (Microservices), this request would be a nightmare. The &ldquo;Route Service&rdquo; would have to message the &ldquo;War Zone Service,&rdquo; which would message the &ldquo;Inn Service,&rdquo; all over a treacherous network. But in the Majestic Monolith, the Chamberlain (The Code) does not need to travel to a different village; he does not need to negotiate a trade treaty; he does not need to worry if the road is washed out. He pours the wine and simply walks across the Great Hall.</p><ul><li>He asks the <strong>Map Master</strong> (Route Module) for the path.</li><li>He asks the <strong>War Scout</strong> (Risk Module) for safety data.</li><li>He asks the <strong>Innkeeper</strong> (Hotel Module) for availability.</li></ul><p>They are all standing in the same room. They share the same memory. The answer is assembled in milliseconds end to end.</p><p>This is the beauty of <strong>Inter-Process Communication (IPC)</strong>. In the Monolith, different modules live in the same memory space. Calling a function is as fast as a whisper across the table. There is no network overhead, no serialization of JSON, no handshake. The &ldquo;<a href=https://www.researchgate.net/publication/322500050_Fallacies_of_Distributed_Computing_Explained target=_blank rel=noreferrer>Fallacies of Distributed Computing</a>&rdquo; - that the network is reliable, or that latency is zero, and etc. - do not apply here, because there <em>is no network</em>. </p><p>The system is lightning fast because the distance between intention and execution is microscopic.</p><h3 id=the-royal-treasury-the-absolutism-of-acid class="relative group">The Royal Treasury: The Absolutism of ACID <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-royal-treasury-the-absolutism-of-acid aria-label=Anchor>#</a></span></h3><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/the-royal-treasure_hu_7aeea9ccea7d5848.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/the-royal-treasure_hu_f5ffee812a90dfed.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/the-royal-treasure_hu_83d7cc244d5c8bc8.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/the-royal-treasure_hu_83d7cc244d5c8bc8.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=559 class="mx-auto my-0 rounded-md" alt="The Royal Treasury: The Absolutism of ACID" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/the-royal-treasure_hu_cb25d6e447af376.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/the-royal-treasure_hu_ae11a9a4b7032292.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/the-royal-treasure_hu_cb25d6e447af376.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/the-royal-treasure.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/the-royal-treasure.jpg 1024w" sizes=100vw></picture></figure><p>Deep within the <a href=https://www.merriam-webster.com/dictionary/donjon target=_blank rel=noreferrer>donjon</a> (a massive inner tower in a medieval castle) lies the <strong>Royal Treasury</strong>. This is your monolithic <strong>Database</strong>. The Monolith enjoys a privilege that modern distributed systems struggle to replicate: ACID Transactions (Atomicity, Consistency, Isolation, Durability).</p><p>Let us say a client books a journey. You must:</p><ol><li>Deduct gold from the Client&rsquo;s account.</li><li>Reserve a seat on the ship.</li><li>Pay the toll collector.</li></ol><p>In the Keep, the <strong>Royal Treasurer</strong> opens the single <strong>Great Ledger</strong>. He dips his quill. He performs all three steps in one continuous motion. Crucially, if the castle catches fire (System Crash) after step 2, the Treasurer simply burns the page. The transaction never happened. The gold is not lost; the seat is not double-booked.</p><p>Or&mldr; Consider the collection of taxes. The Sheriff brings 50 gold coins from the village.</p><p>The <strong>Royal Treasurer</strong> opens the <strong>Great Ledger</strong>.</p><ol><li>He dips his quill.</li><li>He subtracts 50 coins from the Village debt.</li><li>He adds 50 coins to the King&rsquo;s Vault.</li></ol><p>The <strong>Royal Treasurer</strong> closes the <strong>Great Ledger</strong>.</p><p>The state of the world is consistent. There is only one Ledger. There are no arguments about who owns what, because there is only one room where ownership is recorded. The residents of the Keep sleep soundly, knowing that the state of the world is consistent. There is no <a href=https://en.wikipedia.org/wiki/Two_Generals%27_Problem target=_blank rel=noreferrer>&ldquo;Two Generals Problem&rdquo;</a> here, because there is only one General and one Ledger.</p><h3 id=the-walls-the-simplicity-of-defense class="relative group">The Walls: The Simplicity of Defense <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-walls-the-simplicity-of-defense aria-label=Anchor>#</a></span></h3><p>Defending the Keep is straightforward.</p><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Simplicity_of_defence_hu_728c39eb3a7edaba.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Simplicity_of_defence_hu_ba6a17feb64bdad2.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Simplicity_of_defence_hu_61d7e241eedaf62.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Simplicity_of_defence_hu_61d7e241eedaf62.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=559 class="mx-auto my-0 rounded-md" alt="The Walls: The Simplicity of Defense" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Simplicity_of_defence_hu_462e265caa55e12c.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Simplicity_of_defence_hu_a48c6308a7260c02.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Simplicity_of_defence_hu_462e265caa55e12c.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Simplicity_of_defence.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Simplicity_of_defence.jpg 1024w" sizes=100vw></picture></figure><p>First of all, let&rsquo;s see what you have and what you have to worry about:</p><ul><li>You had one perimeter: the <strong>Curtain Wall</strong>.</li><li>You have entry point: the <strong>Drawbridge</strong> (The Public API / Load Balancer).</li></ul><p>The curtain walls are so high and strong that nobody can climb so high and so thick that nobody can make a hole. Around the keep, you have a deep and wide moat with water (hopefully only water), and there is no way to cross without being detected. You inspected the whole keep, and you know for sure that there are no hidden holes, and you need to secure the only main entrance.</p><p>To secure the Monolith, you posted your guards (Firewalls/Authentication) at the <strong>Drawbridge</strong>. Once a visitor passes the guards - they are authenticated - you trust them. They could walk from the stables to the kitchen without being stopped again. The Cook can talk to the Treasurer without showing a badge every time. You do not need to secure traffic inside the castle.</p><p>This &ldquo;Hard Shell, Soft Center&rdquo; security model is incredibly efficient to manage. You focus all your guards on the front gate. The Castellan (The Ops Team) doesn&rsquo;t need to coordinate security policies across fifty different guard towers in fifty different towns. They don&rsquo;t need <a href=https://cyberprotection-magazine.com/how-a-medieval-city-can-explain-cloud-security target=_blank rel=noreferrer>&ldquo;Zero Trust&rdquo;</a> architecture between your <em>Booking Class</em> and your <em>Pricing Class</em>. There is only one set of keys. If the drawbridge is up, the system is safe.</p><h3 id=the-joy-of-the-castellan-operational-simplicity class="relative group">The Joy of the Castellan: Operational Simplicity <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-joy-of-the-castellan-operational-simplicity aria-label=Anchor>#</a></span></h3><p>For the <strong>Castellan</strong> (The DevOps/Ops Team), the Keep is a joy to manage.</p><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Operational_Simplicity_hu_81954d4842c88f49.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Operational_Simplicity_hu_94e74d9020463067.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Operational_Simplicity_hu_45d611feb4213b1f.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Operational_Simplicity_hu_45d611feb4213b1f.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=559 class="mx-auto my-0 rounded-md" alt="The Walls: The Simplicity of Defense" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Operational_Simplicity_hu_796e3a287a3f6501.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Operational_Simplicity_hu_263bab2075df136b.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Operational_Simplicity_hu_796e3a287a3f6501.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Operational_Simplicity.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/Operational_Simplicity.jpg 1024w" sizes=100vw></picture></figure><p>For example:</p><ul><li><strong>Deployment</strong>: Everything inside, within the <strong>Curtain Wall</strong>, and when you add a new feature - say, &ldquo;Search by Carriage Type&rdquo; - you compile the code into one artifact (a single binary). You lower the banner, raise the new one, and you are done. You do not need to orchestrate the upgrade of fifty different services in a specific order. You don&rsquo;t need Kubernetes.</li><li><strong>Resources Management</strong>: You stay in the single perimeter, and you see where you have to add/remove resources. You can observe everything from the single tower.</li><li><strong>Debugging</strong>: If the booking fails, the Castellan walks into the cellar (The Log Files). He reads one scroll. The error trace is a single, unbroken line from the user&rsquo;s click down to the database query. He does not need to chase ghosts across a distributed network.</li></ul><p>The Majestic Monolith is strong. It is fast. It is unified. It is the pinnacle of the Age of Stone.</p><hr><h2 id=the-sprawl-the-crisis-of-the-bailey class="relative group">The Sprawl: The Crisis of the Bailey <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-sprawl-the-crisis-of-the-bailey aria-label=Anchor>#</a></span></h2><p>But stone walls, unlike software requirements, cannot expand indefinitely.</p><div class="lead !mb-9 text-xl">Success became the Keep&rsquo;s undoing.</div><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Crisis_of_the_Bailey_hu_afc00c49bfbbcd73.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Crisis_of_the_Bailey_hu_62dc0bc52457c087.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Crisis_of_the_Bailey_hu_67a8067a4bdcfa77.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Crisis_of_the_Bailey_hu_67a8067a4bdcfa77.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=559 class="mx-auto my-0 rounded-md" alt="The Walls: The Simplicity of Defense" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Crisis_of_the_Bailey_hu_29f2ad77285ef43a.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Crisis_of_the_Bailey_hu_b0018c130f373eb5.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Crisis_of_the_Bailey_hu_29f2ad77285ef43a.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Crisis_of_the_Bailey.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Crisis_of_the_Bailey.jpg 1024w" sizes=100vw></picture></figure><p>The Kingdom grew.</p><p>The King wanted new features: a jousting tournament, a falconry, a larger kitchen, and a new wing for the foreign ambassadors.</p><p>The ambition of a travel startup grew as well. Well, fairly to mention that the King enjoys traveling and forced those ambitions grow. Your &ldquo;Travel Search Engine&rdquo; becomes a victim of its own success. The King demands more. He wants to travel to a new destination. He also wants to book not just carriages, but ships, horses, and mercenaries. He wants to have more taxes paid, so dynamic pricing based on the weather seems a great problem resolution. And&mldr; the King just recently ordered an iPhone app for his knights.</p><p>However, the King and his requirements were not the only ones, and the company was searching for solutions to problems raised by many users. During the kingdom&rsquo;s rise, you expanded the range of services for many of the King&rsquo;s subjects and their expectations grew as well.</p><p>The Keep began to fill up. More carriages and horses were needed. Inns quickly overflowed. Guests had varied preferences, and the kitchens were under increasing pressure. You needed more supplies, more storage capacity to meet the needs of both the fortress and the guests, and to stock the wagons with food. You were constantly forced to expand&mldr; The <strong>Master Clerk</strong> can no longer work alone; he has hired 300 assistants. They are all elbowing each other in the Great Hall. And thus began the era of <strong>The Sprawl</strong>.</p><h3 id=the-shantytown-of-dependencies class="relative group">The Shantytown of Dependencies <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-shantytown-of-dependencies aria-label=Anchor>#</a></span></h3><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Shantytown_of_Dependencies_hu_4039b6565bb6478a.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Shantytown_of_Dependencies_hu_27175f0ac789925a.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Shantytown_of_Dependencies_hu_42336043e765ede9.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Shantytown_of_Dependencies_hu_42336043e765ede9.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=559 class="mx-auto my-0 rounded-md" alt="The Walls: The Simplicity of Defense" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Shantytown_of_Dependencies_hu_94a5997c0e8baf8a.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Shantytown_of_Dependencies_hu_61baace590eaa809.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Shantytown_of_Dependencies_hu_94a5997c0e8baf8a.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Shantytown_of_Dependencies.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Shantytown_of_Dependencies.jpg 1024w" sizes=100vw></picture></figure><p>When the Keep could hold no more, you started building in the Bailey. To accommodate the new features, you build lean-tos in the courtyard between the Keep and the outer wall. You build a &ldquo;Mercenary Booking Shack&rdquo; on top of the &ldquo;Horse Stable.&rdquo; To save stone (code reuse), the new &ldquo;Dovecote&rdquo; was built using the back wall of the blacksmith&rsquo;s forge and extended onto the forge&rsquo;s roof. This represents <strong>Tight Coupling</strong> and <strong>Spaghetti Code</strong>. When you saw impossible or not rational to add a new building (Module), then you made some shortpaths in the present ones. The small <code>if</code> wasn&rsquo;t seems harmful behind a Great Pressure of the Keep&rsquo;s Bailey&rsquo;s size limits.</p><p>Sometimes, you decided to adjust the usage of the presents buildings. When the King lost his interest to the falconry, you decided to re-use the building for the &ldquo;Mercenary Booking Shack&rdquo;. The Walls and Keep was under the pressure of constant and never stoping renovations and reconstruction (Refactoring), which was way more difficult to justify, because a damage was more and more visible and it was more difficult to make a change.</p><p>In the overcrowded Monolith, modules are no longer neat, separate rooms. They are shanties leaning on one another&mldr; Because everyone lives in the same Keep, they start borrowing each other&rsquo;s tools without asking. The &ldquo;Carriage Module&rdquo; starts reading directly from the &ldquo;Hotel Module&rsquo;s&rdquo; private notebook. The &ldquo;User Profile&rdquo; module borrows a column from the &ldquo;Billing&rdquo; table. The &ldquo;Reporting&rdquo; module reaches directly into the private memory of the &ldquo;Inventory&rdquo; module.</p><p>One day, a junior smith changes the shape of a horseshoe (a small code change in a utility library). Suddenly, the carriages stop working. The horses go lame. The entire travel network collapses. The dependencies are invisible and deadly.</p><p>The result is fragility. If the Blacksmith lights a hot fire to forge a sword, the heat penetrates the wall and the roof, and kills the pigeons on the other side. A developer changes a line of code in the &ldquo;Invoice Printing&rdquo; class, and inexplicably, the &ldquo;User Login&rdquo; fails. The dependencies are invisible, organic, and terrifying.</p><h3 id=the-stench-of-the-garderobe-technical-debt class="relative group">The Stench of the Garderobe (Technical Debt) <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-stench-of-the-garderobe-technical-debt aria-label=Anchor>#</a></span></h3><p>Let us speak of sanitation.</p><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Stench_of_the_Garderobe_hu_f4b13265723e7044.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Stench_of_the_Garderobe_hu_f132177ff3b761bf.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Stench_of_the_Garderobe_hu_e2954c168284b1bd.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Stench_of_the_Garderobe_hu_e2954c168284b1bd.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=559 class="mx-auto my-0 rounded-md" alt="The Walls: The Simplicity of Defense" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Stench_of_the_Garderobe_hu_b990fb5df8aaa266.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Stench_of_the_Garderobe_hu_1f523f4112e6dfe2.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Stench_of_the_Garderobe_hu_b990fb5df8aaa266.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Stench_of_the_Garderobe.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Stench_of_the_Garderobe.jpg 1024w" sizes=100vw></picture></figure><p>In the early Keep, waste was managed easily by shafts called garderobes.</p><p>But as the population within the walls exploded, the shafts clogged. With 300 clerks, the Garderobes (toilets) clogged faster than the new cleanup was refined and planned, and every time this operation was performed, there was not enough time to clean up everything completely. So, the waste (technical debt) started accumulating and the cost of having it (the smell) and budgets for re-construction (redesign) explodes quickly.</p><p>Code written five years ago - the &ldquo;Foundation&rdquo; - sits at the bottom of the tower. Due to an essential effort for operational work with the Garderobes, nobody saw it possible to perform a regular inspection of the Foundation, and soon it became even more difficult to do because the stagnant foul smell. The old wood Foundation is rotten, but it supports the weight of the Great Hall. Code that was written ten years ago - the &ldquo;Legacy Foundation&rdquo; - sat at the bottom of the structure, untouchable and misunderstood. To fix a bug in the foundation was to risk bringing down the entire tower. No one dares to touch it. So, the inhabitants learned to live with the stench.</p><p>They built layers of abstraction (perfume) over the rot.</p><p>New developers (squires) joined the castle and spent months just learning how to navigate the maze of hallways without stepping in filth.</p><p>Velocity slowed to a crawl.</p><h3 id=the-siege-of-traffic-vertical-scaling-limits class="relative group">The Siege of Traffic: Vertical Scaling Limits <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-siege-of-traffic-vertical-scaling-limits aria-label=Anchor>#</a></span></h3><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Siege_of_Traffic_hu_e6632cf11b1b0775.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Siege_of_Traffic_hu_c25cd65f62392f20.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Siege_of_Traffic_hu_8d99c877f7d6679a.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Siege_of_Traffic_hu_8d99c877f7d6679a.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=559 class="mx-auto my-0 rounded-md" alt="The Walls: The Simplicity of Defense" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Siege_of_Traffic_hu_21af0950fb48aeb7.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Siege_of_Traffic_hu_a43e4517bb12fbf8.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Siege_of_Traffic_hu_21af0950fb48aeb7.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Siege_of_Traffic.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Siege_of_Traffic.jpg 1024w" sizes=100vw></picture></figure><p>But then came gunpowder and the enemy army came: <strong>The Traffic Spike</strong>.</p><p>The Castle has only one Well (The Database). During the siege (Black Friday), every resident - from the soldier to the cook - needs water simultaneously. They crowd around the single shaft. Everybody lowers their bucket into the same shaft. The ropes get tangled. Arguments break out.</p><p>The <strong>Castellan</strong> (The DevOps/Ops Team) tries to solve this. He digs the well deeper (Faster CPU).
He is making the bucket bigger and bigger (vertical scaling / more RAM). But there is a physical limit to how big a bucket you can hoist.</p><p>Eventually, the Monolith simply cannot serve enough water.</p><p>Suddenly, the very distinctives that made the Castle legendary - its towering height and rigid, stone permanence - became its undoing. Against the explosive, rapid-fire traffic spikes, the castle was no longer a fortress; it was merely a large, static target.</p><p>The Castle cannot scale&mldr; The knights riot.</p><p>In our digital landscape, this &lsquo;gunpowder&rsquo; arrived in the form of Cloud Computing and Agile methodologies. Just as cannons forced architects to stop building up (vertical scaling) and start building out (horizontal scaling), the demands of the modern web exposed the monolith’s fatal flaw: it was too heavy to move and too brittle to withstand the shock of constant change.</p><h3 id=the-fear class="relative group">The Fear <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-fear aria-label=Anchor>#</a></span></h3><p>Finally, the most paralyzing symptom of the Sprawl: <strong>The Fear</strong>.</p><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Fear_of_the_Deploy_hu_da548cdf4c831872.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Fear_of_the_Deploy_hu_e4effc63aaa25e5e.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Fear_of_the_Deploy_hu_36a264a2b1a0fcec.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Fear_of_the_Deploy_hu_36a264a2b1a0fcec.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=559 class="mx-auto my-0 rounded-md" alt="The Walls: The Simplicity of Defense" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Fear_of_the_Deploy_hu_b11d5d1985930879.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Fear_of_the_Deploy_hu_a4b86b8eb209124f.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Fear_of_the_Deploy_hu_b11d5d1985930879.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Fear_of_the_Deploy.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Fear_of_the_Deploy.jpg 1024w" sizes=100vw></picture></figure><p>Because the Castle is one solid block of stone, with many dependencies and risk of wall (or tower) collapse, you cannot renovate the kitchen without closing the entire castle.</p><p>To deploy a small fix for the &ldquo;Carriage Search,&rdquo; you must redeploy the entire application.</p><p>To deploy a new version of the Monolith, you must raise the drawbridge, kick everyone out (Downtime), and hope the new structure holds.</p><p>Because the system is so complex, no single person understands it all.
Deployments become &ldquo;Big Bang&rdquo; events, planned months in advance, performed at midnight on weekends.</p><p>The residents are angry. The knights are still rioting. They require explanation from the <strong>Castellan</strong> (The DevOps/Ops Team) and the Architect.</p><p>The <strong>Castellan</strong>’s (The DevOps/Ops Team) anxiety poisoned even the language of the court. In the Golden Age, the architects circulated <strong>RFCs</strong> - noble <code>Requests For Counsel</code> - seeking wisdom from every mason and smith. But as the fear of failure grew, these scrolls were twisted. They first hardened into <code>Requests For Commitment</code>, demanding blood oaths of certainty in an uncertain world. Finally, in the darkest days of the siege, they became <code>Receipts For Culpability</code>: paper trails forged solely to identify which sorcerer to burn when the magic inevitably failed.</p><div class="lead !mb-9 text-xl">The Castle, once a symbol of strength, has become a prison.</div><p>The Architects are terrified.</p><hr><h2 id=the-decision-to-build-the-bastide class="relative group">The Decision: To Build the Bastide <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-decision-to-build-the-bastide aria-label=Anchor>#</a></span></h2><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/To_Build_the_Bastide_hu_c0391084c60210e5.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/To_Build_the_Bastide_hu_8868dfffd38afc13.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/To_Build_the_Bastide_hu_f13096d0d8608dba.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/To_Build_the_Bastide_hu_f13096d0d8608dba.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=565 class="mx-auto my-0 rounded-md" alt="The Walls: The Simplicity of Defense" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/To_Build_the_Bastide_hu_83527ee9b9d8ff41.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/To_Build_the_Bastide_hu_6958c6c889922b49.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/To_Build_the_Bastide_hu_83527ee9b9d8ff41.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/To_Build_the_Bastide.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/To_Build_the_Bastide.jpg 1024w" sizes=100vw></picture></figure><p>The Chief Architect stands on the battlements, looking down at the chaotic, overcrowded, smelly Bailey. He sees the servants tripping over each other. He sees the cracks in the foundation. He realizes that <strong>Vertical Scaling</strong> - building the tower higher - is no longer physics-compliant.</p><p>He looks out to the horizon, to the green fields beyond the moat. He makes a radical decision. &ldquo;We cannot save the Castle,&rdquo; he declares. &ldquo;We must build a City.&rdquo;</p><p>This is the transition to <strong>Microservices</strong>. Historically, this mirrors the founding of the <strong>Bastides</strong> in 13th and 14th-century France. Unlike the organic, huddled growth of the old bourgs, Bastides were <em>planned new towns</em>. They were instruments of economic expansion, built on a grid.</p><h3 id=the-charter-of-the-new-city class="relative group">The Charter of the New City <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-charter-of-the-new-city aria-label=Anchor>#</a></span></h3><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Charter_of_the_New_City_hu_b302f08b10d23d7b.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Charter_of_the_New_City_hu_714f85e5a8f49d11.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Charter_of_the_New_City_hu_68410526ae30fad0.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Charter_of_the_New_City_hu_68410526ae30fad0.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=565 class="mx-auto my-0 rounded-md" alt="The Walls: The Simplicity of Defense" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Charter_of_the_New_City_hu_64f5d4f8c99b936.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Charter_of_the_New_City_hu_bb17721ce75c550e.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Charter_of_the_New_City_hu_64f5d4f8c99b936.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Charter_of_the_New_City.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Charter_of_the_New_City.jpg 1024w" sizes=100vw></picture></figure><p>The Architect draws a new map. It is not a single building, but a federation of specialized structures.</p><ol><li><strong>Decomposition</strong>: We will move the Blacksmiths to their own district (The Inventory Service). We will move the Bakers to theirs (The Order Service). We will move the Carriage Masters to their own district (The Transport Service). We will move the Innkeepers to theirs (The Hotel Service).</li><li><strong>Autonomy</strong>: If the Blacksmiths need to expand, they can build a new forge without asking the Bakers for permission. If the Bakers burn down their ovens, the Blacksmiths can keep working. This is <strong>Fault Isolation</strong>.</li><li><strong>The Grid (API Contracts)</strong>: The districts will not be connected by secret hallways. They will be connected by public roads (The Network). Interactions will be governed by a Charter (The API Definition), ensuring that the Blacksmith knows exactly what the Baker needs.</li></ol><h3 id=the-trade-off class="relative group">The Trade-Off <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-trade-off aria-label=Anchor>#</a></span></h3><figure class="mx-auto my-0 rounded-md"><picture class="mx-auto my-0 rounded-md"><source srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Trade-Off_hu_d38fed5ee218d4f4.webp 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Trade-Off_hu_7a8de1c32ca32701.webp 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Trade-Off_hu_42a85500dcca190b.webp 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Trade-Off_hu_42a85500dcca190b.webp 1024w" sizes=100vw type=image/webp><img width=1024 height=565 class="mx-auto my-0 rounded-md" alt="The Walls: The Simplicity of Defense" loading=lazy decoding=async src=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Trade-Off_hu_f1796be8e682d4f0.jpg srcset="https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Trade-Off_hu_c01fdfe3a4573465.jpg 330w,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Trade-Off_hu_f1796be8e682d4f0.jpg 660w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Trade-Off.jpg 1024w
,https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/The_Trade-Off.jpg 1024w" sizes=100vw></picture></figure><p>The Architect knows this decision is dangerous and comes with a heavy price. In the Castle, he was safe behind thick walls. He had one well, one ledger, and zero latency. In the City, he is exposed. He has traded the <strong>Complexity of Code</strong> for the <strong>Complexity of Logistics</strong>.</p><ul><li>He will have to build roads (Network Infrastructure).</li><li>He will have to worry about bandits (Security).</li><li>He will have to hire runners to carry messages between the districts (Latency).</li><li>He will lose the Royal Truth of the single Ledger (Eventual Consistency).</li></ul><p>&ldquo;The Castle was safe,&rdquo; the Architect writes in his chronicle. &ldquo;But the Castle was a tomb. We choose the danger of the City for the promise of growth.&rdquo;</p><h3 id=bonus class="relative group">Bonus <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#bonus aria-label=Anchor>#</a></span></h3><p>Check <a href=/posts/the-code-citadel/rfcs-meanings/>the log of meanings</a> to get a full picture of this dramatic transformation.</p></div></section><footer class="max-w-prose pt-8 print:hidden"><div class=flex><picture class="!mb-0 !mt-0 me-4 w-24 h-auto rounded-full"><img width=2816 height=2995 class="!mb-0 !mt-0 me-4 w-24 h-auto rounded-full" alt="Andrey Kumanyaev" loading=lazy decoding=async src=https://zzet.org/img/kdauthor_hu_13d4b4a298916f43.jpeg srcset="https://zzet.org/img/kdauthor_hu_b89a404c63c2cc41.jpeg 330w,https://zzet.org/img/kdauthor_hu_13d4b4a298916f43.jpeg 660w
,https://zzet.org/img/kdauthor_hu_8e13899a507bb0aa.jpeg 1024w
,https://zzet.org/img/kdauthor_hu_8fbcf5b3caf8d913.jpeg 1320w" sizes=100vw></picture><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Andrey Kumanyaev</div><div class="text-sm text-neutral-700 dark:text-neutral-400">Senior Engineering Manager @ Vio.com | Leading & Building High-Performance Teams & Scaling High-Load Platforms | Golang, ML, AWS, passionate about Rust</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://github.com/zzet target=_blank aria-label=Github rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://x.com/zzetorg target=_blank aria-label=X-Twitter rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://www.reddit.com/user/zzet/ target=_blank aria-label=Reddit rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://www.linkedin.com/in/andrey-kumanyaev/ target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a></div></div></div></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/&amp;quote=The%20Code%20Citadel%20-%20The%20Fall%20of%20the%20Keep" title="Share on Facebook" aria-label="Share on Facebook" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://x.com/intent/tweet/?url=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/&amp;text=The%20Code%20Citadel%20-%20The%20Fall%20of%20the%20Keep" title="Post on X" aria-label="Post on X" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://tootpick.org/#text=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/%20The%20Code%20Citadel%20-%20The%20Fall%20of%20the%20Keep" title="Toot on Mastodon" aria-label="Toot on Mastodon" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/&amp;resubmit=true&amp;title=The%20Code%20Citadel%20-%20The%20Fall%20of%20the%20Keep" title="Submit to Reddit" aria-label="Submit to Reddit" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/&amp;title=The%20Code%20Citadel%20-%20The%20Fall%20of%20the%20Keep" title="Share on LinkedIn" aria-label="Share on LinkedIn" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/&amp;subject=The%20Code%20Citadel%20-%20The%20Fall%20of%20the%20Keep" title="Send via email" aria-label="Send via email" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.threads.net/intent/post?text=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/%20The%20Code%20Citadel%20-%20The%20Fall%20of%20the%20Keep" title="Post on Threads" aria-label="Post on Threads" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M331.5 235.7c2.2.9 4.2 1.9 6.3 2.8 29.2 14.1 50.6 35.2 61.8 61.4 15.7 36.5 17.2 95.8-30.3 143.2-36.2 36.2-80.3 52.5-142.6 53h-.3c-70.2-.5-124.1-24.1-160.4-70.2-32.3-41-48.9-98.1-49.5-169.6V256v-.2C17 184.3 33.6 127.2 65.9 86.2 102.2 40.1 156.2 16.5 226.4 16h.3c70.3.5 124.9 24 162.3 69.9 18.4 22.7 32 50 40.6 81.7l-40.4 10.8c-7.1-25.8-17.8-47.8-32.2-65.4-29.2-35.8-73-54.2-130.5-54.6-57 .5-100.1 18.8-128.2 54.4C72.1 146.1 58.5 194.3 58 256c.5 61.7 14.1 109.9 40.3 143.3 28 35.6 71.2 53.9 128.2 54.4 51.4-.4 85.4-12.6 113.7-40.9 32.3-32.2 31.7-71.8 21.4-95.9-6.1-14.2-17.1-26-31.9-34.9-3.7 26.9-11.8 48.3-24.7 64.8-17.1 21.8-41.4 33.6-72.7 35.3-23.6 1.3-46.3-4.4-63.9-16-20.8-13.8-33-34.8-34.3-59.3-2.5-48.3 35.7-83 95.2-86.4 21.1-1.2 40.9-.3 59.2 2.8-2.4-14.8-7.3-26.6-14.6-35.2-10-11.7-25.6-17.7-46.2-17.8H227c-16.6.0-39 4.6-53.3 26.3l-34.4-23.6c19.2-29.1 50.3-45.1 87.8-45.1h.8c62.6.4 99.9 39.5 103.7 107.7l-.2.2zm-156 68.8c1.3 25.1 28.4 36.8 54.6 35.3 25.6-1.4 54.6-11.4 59.5-73.2-13.2-2.9-27.8-4.4-43.4-4.4-4.8.0-9.6.1-14.4.4-42.9 2.4-57.2 23.2-56.2 41.8l-.1.1z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://telegram.me/share/url?text=https://zzet.org/posts/the-code-citadel/1-the-fall-of-the-keep/&amp;url=The%20Code%20Citadel%20-%20The%20Fall%20of%20the%20Keep" title="Share on Telegram" aria-label="Share on Telegram" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111.033 8 0 119.033.0 256S111.033 504 248 504 496 392.967 496 256 384.967 8 248 8zM362.952 176.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452.0 013.53 6.716A43.765 43.765.0 01362.952 176.66z"/></svg></span></a></section><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span></span><span><a class="group flex text-right" href=https://zzet.org/posts/the-code-citadel/rfcs-meanings/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">RFC - what did it mean in the Keep through the time</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2026-01-31 00:00:00 +0000 UTC">31 January 2026</time>
</span></span><span class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[-2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&rarr;</span><span class="ltr:hidden rtl:inline">&larr;</span></span></a></span></div></div></footer></article></main><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12" id=to-top hidden=true><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div><footer class="py-10 print:hidden"><nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex list-none flex-col sm:flex-row"><li class="group mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a href=/archive/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Archive</span></a></li></ul></nav><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2026
Andrey Kumanyaev</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://github.com/jpanther/congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="flex flex-row items-center"></div></div></footer></div></body></html>