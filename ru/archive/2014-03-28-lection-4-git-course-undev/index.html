<!doctype html><html lang=ru dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#FFFFFF"><title>Git. Просто Git. Лекция 4. Git на сервере. &#183; Андрей Куманяев</title><meta name=title content="Git. Просто Git. Лекция 4. Git на сервере. &#183; Андрей Куманяев"><script type=text/javascript src=https://zzet.org/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="></script><link type=text/css rel=stylesheet href=https://zzet.org/css/main.bundle.min.100caa677b4bc416cdd884107b203b4869f9b413a19aa57d12069fb826f1abe9.css integrity="sha256-EAyqZ3tLxBbN2IQQeyA7SGn5tBOhmqV9EgafuCbxq+k="><meta name=description content="
      
        
      
    "><meta name=robots content="all"><link rel=canonical href=https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/"><meta property="og:site_name" content="Андрей Куманяев"><meta property="og:title" content="Git. Просто Git. Лекция 4. Git на сервере."><meta property="og:locale" content="ru"><meta property="og:type" content="article"><meta property="article:section" content="archive"><meta property="article:published_time" content="2014-03-28T00:00:00+00:00"><meta property="article:modified_time" content="2014-03-28T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git. Просто Git. Лекция 4. Git на сервере."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleSection":"","name":"Git. Просто Git. Лекция 4. Git на сервере.","headline":"Git. Просто Git. Лекция 4. Git на сервере.","inLanguage":"ru","url":"https:\/\/zzet.org\/ru\/archive\/2014-03-28-lection-4-git-course-undev\/","author":{"@type":"Person","name":"Андрей Куманяев"},"copyrightYear":"2014","dateCreated":"2014-03-28T00:00:00\u002b00:00","datePublished":"2014-03-28T00:00:00\u002b00:00","dateModified":"2014-03-28T00:00:00\u002b00:00","mainEntityOfPage":"true","wordCount":"8901"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://zzet.org/ru/","name":"Андрей Куманяев","position":1},{"@type":"ListItem","item":"https://zzet.org/ru/archive/","name":"","position":2},{"@type":"ListItem","name":"Git. Просто Git. Лекция 4. Git На Сервере.","position":3}]}</script><meta name=author content="Андрей Куманяев"><link href=https://twitter.com/username rel=me><link href=https://github.com/zzet rel=me><link href=https://x.com/zzetorg rel=me><link href=https://www.reddit.com/user/zzet/ rel=me><link href=https://www.linkedin.com/in/andrey-kumanyaev/ rel=me><script async src="https://www.googletagmanager.com/gtag/js?id=G-VGXR3BQCTQ"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VGXR3BQCTQ")}</script></head><body class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span>Перейти к содержанию</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden"><nav class="flex items-start justify-between sm:items-center"><div class="flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/ru/>Андрей Куманяев</a></div><ul class="flex list-none flex-col text-end sm:flex-row"><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/ru/about/ title="Обо мне"><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Обо мне</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/ru/posts/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Блог</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=https://github.com/zzet title target=_blank><span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=https://x.com/zzetorg title target=_blank><span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg></span></span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"></li></ul></nav></header><div class="relative flex grow flex-col"><main id=main-content class=grow><article><header class=max-w-prose><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=https://zzet.org/ru/>Андрей Куманяев</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=https://zzet.org/ru/archive/>archive</a><span class="px-1 text-primary-500">/</span></li><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/>Git. Просто Git. Лекция 4. Git на сервере.</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Git. Просто Git. Лекция 4. Git на сервере.</h1><div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2014-03-28 00:00:00 +0000 UTC">28 марта 2014 г.</time><span class="px-2 text-primary-500">&#183;</span><span title="Время чтения">42 минуты</span><span class="px-2 text-primary-500">&#183;</span>
<span class=mb-[2px]><a href=https://github.com/zzet.github.com/content/archive/2014-03-28-lection-4-git-course-undev.ru.md class="text-lg hover:text-primary-500" rel="noopener noreferrer" target=_blank title=Редактировать><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M490.3 40.4c21.9 21.87 21.9 57.33.0 79.2l-30 30.1-98-97.98 30.1-30.06C414.3-.2135 449.7-.2135 471.6 21.66L490.3 40.4zM172.4 241.7 339.7 74.34l98 97.96L270.3 339.6C264.2 345.8 256.7 350.4 248.4 353.2l-88.8 29.6C150.1 385.6 141.5 383.4 135 376.1 128.6 370.5 126.4 361 129.2 352.4l29.6-88.8C161.6 255.3 166.2 247.8 172.4 241.7v0zM192 63.1c17.7.0 32 15.23 32 32 0 18.6-14.3 32-32 32H96c-17.67.0-32 15.2-32 32V416c0 17.7 14.33 32 32 32H352c17.7.0 32-14.3 32-32V319.1c0-16.8 14.3-32 32-32s32 15.2 32 32V416c0 53-43 96-96 96H96c-53.02.0-96-43-96-96V159.1c0-53 42.98-96 96-96h96z"/></svg></span></a></span></div></div></header><section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row"><div class="min-h-0 min-w-0 max-w-prose grow"><h1 id=git-на-сервере class="relative group">Git на сервере <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#git-%d0%bd%d0%b0-%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5 aria-label=Якорь>#</a></span></h1><p>К этому моменту вы уже должны уметь решать большинство повседневных задач, для которых будете использовать Git. Однако, для совместной работы в Git&rsquo;е, вам необходим удалённый репозиторий. Несмотря на то, что технически вы можете отправлять и забирать изменения непосредственно из личных репозиториев, делать это не рекомендуется. Вы легко можете испортить то, над чем работают другие, если не будете аккуратны. К тому же, вам бы наверняка хотелось, чтобы остальные имели доступ к репозиторию даже если ваш компьютер выключен, поэтому наличие более надежного репозитория обычно весьма полезно. Поэтому предпочтительный метод взаимодействия с кем-либо — это создание промежуточного репозитория, к которому вы оба будете иметь доступ, и отправка и получение изменений через него. Мы будем называть этот репозиторий &ldquo;Git-сервер&rdquo;, но обычно размещение Git-репозитория требует очень небольшого количества ресурсов, поэтому вряд ли вам для этого будет нужен весь сервер.</p><p>Запустить Git-сервер просто. Для начала вам следует выбрать протокол, который вы будете использовать для связи с сервером. Первая часть этой лекции описывает доступные протоколы и их достоинства и недостатки. Следующие части освещают базовые конфигурации с использованием этих протоколов, а также настройку вашего сервера для работы с ними. Наконец, мы рассмотрим несколько вариантов готового хостинга, если вы не против разместить ваш код на чьём-то сервере и вы не хотите мучиться с настройками и поддержкой вашего собственного сервера.</p><p>Если вас не интересует настройка собственного сервера, вы можете перейти сразу к последней части этой лекции для настройки аккаунта на Git-хостинге.</p><p>Удалённый репозиторий — это обычно <em>голый (чистый, bare) репозиторий</em> — Git-репозиторий, не имеющий рабочего каталога. Поскольку этот репозиторий используется только для обмена, нет причин создавать рабочую копию на диске, и он содержит только данные Git&rsquo;а. Проще говоря, голый репозиторий содержит только каталог <code>.git</code> вашего проекта и ничего больше.</p><h2 id=протоколы class="relative group">Протоколы <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bf%d1%80%d0%be%d1%82%d0%be%d0%ba%d0%be%d0%bb%d1%8b aria-label=Якорь>#</a></span></h2><p>Git умеет работать с четырьмя сетевыми протоколами для передачи данных: локальный, Secure Shell (SSH), Git и HTTP. В этой части мы обсудим каждый из них и в каких случаях стоит (или не стоит) их использовать.</p><p>Важно понимать, что за исключением протокола HTTP, все эти протоколы требуют, чтобы Git был установлен и работал на сервере.</p><h3 id=локальный-протокол class="relative group">Локальный протокол <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bb%d0%be%d0%ba%d0%b0%d0%bb%d1%8c%d0%bd%d1%8b%d0%b9-%d0%bf%d1%80%d0%be%d1%82%d0%be%d0%ba%d0%be%d0%bb aria-label=Якорь>#</a></span></h3><p>Базовым протоколом является <em>Локальный протокол</em>, при использовании которого удалённый репозиторий — другой каталог на диске. Наиболее часто он используется, если все члены команды имеют доступ к общей файловой системе, например к NFS, или, что менее вероятно, когда все работают на одном компьютере. Последний вариант не столь хорош, поскольку все копии вашего репозитория находятся на одном компьютере, делая возможность потерять всё более вероятной.</p><p>Если у вас смонтирована общая файловая система, вы можете клонировать, отправлять и получать изменения из локального репозитория. Чтобы склонировать такой репозиторий или добавить его в качестве удалённого в существующий проект, используйте путь к репозиторию в качестве URL. Например, для клонирования локального репозитория вы можете выполнить что-то вроде этого:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone /opt/git/project.git
</span></span></code></pre></div><p>Или этого:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone file:///opt/git/project.git
</span></span></code></pre></div><p>Git работает немного по-другому если вы укажете префикс <code>file://</code> для вашего URL. Когда вы просто указываете путь, Git пытается использовать жёсткие ссылки и копировать файлы, когда это нужно. Если вы указываете <code>file://</code>, Git работает с данными так же как при использовании сетевых протоколов, что в целом менее эффективный способ передачи данных. Причиной для использования <code>file://</code> может быть необходимость создания чистой копии репозитория без лишних внешних ссылок и объектов, обычно после импорта из другой СКВ или чего-то похожего. Мы будем использовать обычные пути, поскольку это практически всегда быстрее.</p><p>Чтобы добавить локальный репозиторий в существующий проект, вы можете воспользоваться командой:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git remote add local_proj /opt/git/project.git
</span></span></code></pre></div><p>Теперь вы можете отправлять и получать изменения из этого репозитория так, как вы это делали по сети.</p><h4 id=преимущества class="relative group">Преимущества <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bf%d1%80%d0%b5%d0%b8%d0%bc%d1%83%d1%89%d0%b5%d1%81%d1%82%d0%b2%d0%b0 aria-label=Якорь>#</a></span></h4><p>Преимущества основанных на файлах хранилищ в том, что они просты и используют существующие разграничения прав на файлы и сетевой доступ. Если у вас уже есть общая файловая система, доступ к которой имеет вся команда, настройка репозитория очень проста. Вы помещаете голый репозиторий туда, куда все имеют доступ, и выставляете права на чтение и запись так же, как вы это делали бы для любого другого общего каталога.</p><p>Также это хорошая возможность быстро получить наработки из чьего-то рабочего репозитория. Если вы и ваш коллега работаете над одним и тем же проектом и он хочет, чтобы вы проверили что-то, то запуск команды вроде <code>git pull /home/john/project</code> зачастую проще, чем если бы он отправил на удалённый сервер, а вы забрали бы оттуда.</p><h4 id=недостатки class="relative group">Недостатки <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bd%d0%b5%d0%b4%d0%be%d1%81%d1%82%d0%b0%d1%82%d0%ba%d0%b8 aria-label=Якорь>#</a></span></h4><p>Недостаток этого метода в том, что общий доступ обычно сложнее настроить и получить из разных мест, чем простой сетевой доступ. Если вы хотите отправлять со своего ноутбука, когда вы дома, вы должны смонтировать удалённый диск, что может быть сложно и медленно по сравнению с сетевым доступом.</p><p>Также важно упомянуть, что не всегда использование общей точки монтирования является быстрейшим вариантом. Локальный репозиторий быстрый, только если вы имеете быстрый доступ к данным. Репозиторий на NFS часто медленнее, чем репозиторий через SSH на том же сервере, позволяющий Git&rsquo;у использовать на полную локальные диски на каждой системе.</p><h3 id=протокол-ssh class="relative group">Протокол SSH <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bf%d1%80%d0%be%d1%82%d0%be%d0%ba%d0%be%d0%bb-ssh aria-label=Якорь>#</a></span></h3><p>Наверное, наиболее часто используемый транспортный протокол — это SSH. Причина этого в том, что доступ по SSH уже есть на многих серверах, а если его нет, то его очень легко настроить. Кроме того, SSH — единственный из сетевых протоколов, предоставляющий доступ и на чтение, и на запись. Два других сетевых протокола (HTTP и Git) в большинстве случаев дают доступ только на чтение, поэтому даже если они вам доступны, вам всё равно понадобится SSH для записи. К тому же SSH протокол с аутентификацией, и благодаря его распространённости обычно его легко настроить и использовать.</p><p>Чтобы склонировать Git-репозиторий по SSH, вы можете указать префикс ssh:// в URL, например:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone ssh://user@server/project.git
</span></span></code></pre></div><p>Альтернативно для протокола SSH можно использовать более короткую запись в scp-стиле:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone user@server:project.git
</span></span></code></pre></div><p>Также вы можете не указывать имя пользователя, Git будет использовать то, под которым вы вошли в систему.</p><h4 id=достоинства class="relative group">Достоинства <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%b4%d0%be%d1%81%d1%82%d0%be%d0%b8%d0%bd%d1%81%d1%82%d0%b2%d0%b0 aria-label=Якорь>#</a></span></h4><p>SSH имеет множество достоинств. Во-первых, вы, по сути, вынуждены его использовать, когда нужен авторизованный доступ на запись к репозиторию через сеть. Во-вторых, SSH достаточно легко настроить — SSH-демоны распространены, многие системные администраторы имеют опыт работы с ними, и во многих дистрибутивах они уже настроены или есть утилиты для управления ими. Также доступ по SSH безопасен — данные передаются зашифрованными по авторизованным каналам. Наконец, так же как и Git-протокол и локальный протокол, SSH эффективен, делая данные перед передачей максимально компактными.</p><h4 id=недостатки-1 class="relative group">Недостатки <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bd%d0%b5%d0%b4%d0%be%d1%81%d1%82%d0%b0%d1%82%d0%ba%d0%b8-1 aria-label=Якорь>#</a></span></h4><p>Недостаток SSH в том, что, используя его, вы не можете обеспечить анонимный доступ к репозиторию. Клиенты должны иметь доступ к машине по SSH, даже для работы в режиме только на чтение, что делает SSH неподходящим для проектов с открытым исходным кодом. Если вы используете Git только внутри корпоративной сети, то возможно SSH единственный протокол, с которым вам придётся иметь дело. Если же вам нужен анонимный доступ на чтение для ваших проектов, вам придётся настроить SSH для себя, чтобы выкладывать изменения, и что-нибудь другое для других, для скачивания.</p><h3 id=git-протокол class="relative group">Git-протокол <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#git-%d0%bf%d1%80%d0%be%d1%82%d0%be%d0%ba%d0%be%d0%bb aria-label=Якорь>#</a></span></h3><p>Следующий протокол — Git-протокол. Вместе с Git&rsquo;ом поставляется специальный демон, который слушает порт 9418 и предоставляет сервис, схожий с протоколом ssh, но абсолютно без аутентификации. Чтобы использовать Git-протокол для репозитория, вы должны создать файл <code>git-daemon-export-ok</code>, иначе демон не будет работать с этим репозиторием, но следует помнить, что в протоколе отсутствуют средства безопасности. Соответственно, любой репозиторий в Git&rsquo;е может быть либо доступен для клонирования всем, либо не доступен никому. Как следствие, обычно вы не можете отправлять изменения по этому протоколу. Вы можете открыть доступ на запись, но из-за отсутствия авторизации в этом случае кто угодно, зная URL вашего проекта, сможет его изменить. В общем, это редко используемая возможность.</p><h4 id=достоинства-1 class="relative group">Достоинства <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%b4%d0%be%d1%81%d1%82%d0%be%d0%b8%d0%bd%d1%81%d1%82%d0%b2%d0%b0-1 aria-label=Якорь>#</a></span></h4><p>Git-протокол — самый быстрый из доступных протоколов. Если у вас проект с публичным доступом и большой трафик или у вас очень большой проект, для которого не требуется авторизация пользователей для чтения, вам стоит настроить Git-демон для вашего проекта. Он использует тот же механизм передачи данных, что и протокол SSH, но без дополнительных затрат на кодирование и аутентификацию.</p><h4 id=недостатки-2 class="relative group">Недостатки <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bd%d0%b5%d0%b4%d0%be%d1%81%d1%82%d0%b0%d1%82%d0%ba%d0%b8-2 aria-label=Якорь>#</a></span></h4><p>Недостатком Git-протокола является отсутствие аутентификации. Поэтому обычно не следует использовать этот протокол как единственный способ доступа к вашему проекту. Обычно он используется в паре с SSH для разработчиков, имеющих доступ на запись, тогда как все остальные используют <code>git://</code> с доступом только на чтение.
Кроме того, это, вероятно, самый сложный для настройки протокол. Вы должны запустить собственно демон, не являющийся стандартным. Мы рассмотрим его настройку в разделе &ldquo;Gitosis&rdquo;. К тому же, ему необходим сервис <code>xinetd</code> или ему подобный, что не всегда легко сделать. Также необходимо, чтобы сетевой экран позволял доступ на порт 9418, который не является стандартным портом, всегда разрешённым в корпоративных брандмауэрах. За сетевыми экранами крупных корпораций этот неизвестный порт обычно заблокирован.</p><h3 id=протокол-https class="relative group">Протокол HTTP/S <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bf%d1%80%d0%be%d1%82%d0%be%d0%ba%d0%be%d0%bb-https aria-label=Якорь>#</a></span></h3><p>Последний доступный протокол — HTTP. Прелесть протоколов HTTP и HTTPS в простоте их настройки. По сути, всё, что необходимо сделать — поместить голый репозиторий внутрь каталога с HTTP документами, установить перехватчик <code>post-update</code> и всё. Теперь каждый, имеющий доступ к веб-серверу, на котором был размещён репозиторий, может его склонировать. Таким образом, чтобы открыть доступ к своему репозиторию на чтение через HTTP, нужно сделать что-то наподобие этого:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cd /var/www/htdocs/
</span></span><span style=display:flex><span>$ git clone --bare /path/to/git_project gitproject.git
</span></span><span style=display:flex><span>$ cd gitproject.git
</span></span><span style=display:flex><span>$ mv hooks/post-update.sample hooks/post-update
</span></span><span style=display:flex><span>$ chmod a+x hooks/post-update
</span></span></code></pre></div><p>Вот и всё. Перехватчик <code>post-update</code>, входящий в состав Git&rsquo;а по умолчанию, выполняет необходимую команду (<code>git update-server-info</code>), чтобы извлечение (fetch) и клонирование (clone) по HTTP работали правильно. Эта команда выполняется, когда вы отправляете изменения в репозиторий по SSH. Затем остальные могут склонировать его командой:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone http://example.com/gitproject.git
</span></span></code></pre></div><p>В рассмотренном примере мы использовали каталог <code>/var/www/htdocs</code>, обычно используемый сервером Apache, но вы можете использовать любой веб-сервер, отдающий статические данные, расположив голый репозиторий в нужном каталоге. Данные Git&rsquo;а представляют собой обычные файлы.</p><p>Также возможна настройка Git&rsquo;а для доступа на запись через HTTP, однако этот способ мало распространён и требует от вас настройки WebDAV. Поскольку этот способ редко используется, мы не будем рассматривать его в рамках этого курса. Если вас интересует использование протокола HTTP с возможностью записи, вы можете почитать о подготовке репозитория в этой <a href=http://www.kernel.org/pub/software/scm/git/docs/howto/setup-git-server-over-http.txt target=_blank rel=noreferrer>статье</a>. Положительным моментом настройки Git&rsquo;а для записи через HTTP является то, что вы можете использовать любой WebDAV-сервер, без поддержки каких-либо специфичных для Git&rsquo;а возможностей. Таким образом если ваш хостинг предоставляет WebDAV, вы можете обеспечить запись обновлений репозитория на ваш веб-сайт.</p><h4 id=достоинства-2 class="relative group">Достоинства <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%b4%d0%be%d1%81%d1%82%d0%be%d0%b8%d0%bd%d1%81%d1%82%d0%b2%d0%b0-2 aria-label=Якорь>#</a></span></h4><p>Положительным аспектом использования протокола HTTP является простота настройки. Запуск всего нескольких команд даёт вам возможность предоставить миру доступ к вашему Git-репозиторию. Вам понадобится всего несколько минут, чтобы сделать это. Кроме того, использование протокола HTTP не потребует много ресурсов вашего сервера. Поскольку в основном используется статический HTTP-сервер, обычный сервер Apache может обрабатывать в среднем тысячи файлов в секунду — трудно перегрузить даже небольшой сервер.</p><p>Также вы можете выставлять ваши репозитории в режиме только для чтения через HTTPS, т.е. вы можете шифровать трафик, или вы даже можете авторизовывать клиентов по SSL-сертификату. Обычно для этих целей легче использовать открытые SSH-ключи, но в некоторых конкретных случаях лучшим решением может оказаться использование подписанных SSL-сертификатов или других методов аутентификации, основанных на HTTP, для доступа на чтение через HTTPS.</p><p>Другим плюсом является то, что HTTP — настолько широко используемый протокол, что корпоративные сетевые экраны часто настроены на пропускание трафика, проходящего через этот порт.</p><h4 id=недостатки-3 class="relative group">Недостатки <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bd%d0%b5%d0%b4%d0%be%d1%81%d1%82%d0%b0%d1%82%d0%ba%d0%b8-3 aria-label=Якорь>#</a></span></h4><p>Обратной стороной использования протокола HTTP является его относительно низкая эффективность для клиента. Обычно клонирование или извлечение изменений из репозитория при использовании HTTP гораздо продолжительнее, а объем данных и нагрузка на сеть намного больше, чем у любого другого имеющегося сетевого протокола. Поскольку он не заботится о том, чтобы передавались только необходимые вам данные — никакой динамической обработки на стороне сервера в этом случае не происходит — протокол HTTP часто называют <em>тупым</em> (dumb) протоколом.</p><h2 id=настройка-git-на-сервере class="relative group">Настройка Git на сервере <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-git-%d0%bd%d0%b0-%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5 aria-label=Якорь>#</a></span></h2><p>Для того чтобы осуществить первоначальную настройку любого Git-сервера, необходимо экспортировать существующий репозиторий в новый &ldquo;голый&rdquo; репозиторий, т.е. репозиторий без рабочего каталога. Обычно это несложно сделать.
Чтобы склонировать ваш репозиторий и создать новый &ldquo;голый&rdquo; репозиторий, выполните команду clone с параметром <code>--bare</code>. По существующему соглашению, каталоги с голыми репозиториями заканчиваются на <code>.git</code>, например:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone --bare my_project my_project.git
</span></span><span style=display:flex><span>Initialized empty Git repository in /opt/projects/my_project.git/
</span></span></code></pre></div><p>Вывод этой команды слегка обескураживает. Поскольку <code>clone</code> это по сути <code>git init</code>, а затем <code>git fetch</code>, мы видим вывод от <code>git init</code>, который создаёт пустой каталог. Реальное перемещение объектов не даёт вывода, однако оно действительно происходит. Теперь у вас должна появиться копия данных из каталога Git&rsquo;а в каталоге <code>my_project.git</code>.</p><p>Это примерно то же самое, что и это:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cp -Rf my_project/.git my_project.git
</span></span></code></pre></div><p>Тут есть пара небольших различий в файле конфигурации, но в вашем случае эту разницу можно считать несущественной. Можно считать, что в этом случае берётся собственно Git-репозиторий без рабочего каталога и создаётся каталог только для него.</p><h3 id=размещение-голого-репозитория-на-сервере class="relative group">Размещение &ldquo;голого&rdquo; репозитория на сервере <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d1%80%d0%b0%d0%b7%d0%bc%d0%b5%d1%89%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b3%d0%be%d0%bb%d0%be%d0%b3%d0%be-%d1%80%d0%b5%d0%bf%d0%be%d0%b7%d0%b8%d1%82%d0%be%d1%80%d0%b8%d1%8f-%d0%bd%d0%b0-%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5 aria-label=Якорь>#</a></span></h3><p>Теперь, когда у вас есть голая копия репозитория, всё, что вам нужно сделать, это поместить её на сервер и настроить протоколы. Условимся, что вы уже настроили сервер <code>git.example.com</code>, имеете к нему доступ по SSH и хотите размещать все свои Git-репозитории в каталоге <code>/opt/git</code>. Вы можете сделать новый репозиторий простым копированием голого репозитория:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ scp -r my_project.git user@git.example.com:/opt/git
</span></span></code></pre></div><p>Теперь другие пользователи, имеющие доступ к серверу по SSH и право на чтение к каталогу <code>/opt/git</code>, могут склонировать ваш репозиторий, выполнив:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone user@git.example.com:/opt/git/my_project.git
</span></span></code></pre></div><p>Если у пользователя сервера есть право на запись в каталог <code>/opt/git/my_project.git</code>, он автоматически получает возможность отправки изменений в репозиторий. Git автоматически добавит право на запись в репозиторий для группы, если вы запустите команду <code>git init</code> с параметром <code>--shared</code>.</p><pre><code>$ ssh user@git.example.com
$ cd /opt/git/my_project.git
$ git init --bare --shared
</code></pre><p>Видите, это просто — взять Git-репозиторий, создать его &ldquo;голую&rdquo; версию и поместить её на сервер, к которому у вас и ваших коллег есть доступ по SSH. Теперь вы готовы работать вместе над одним проектом.</p><p>Важно отметить, что это практически всё, что вам нужно сделать, чтобы получить рабочий Git-сервер, к которому несколько человек имеют доступ — просто добавьте учётные записи SSH на сервер, и положите голый репозиторий в место, к которому эти пользователи имеют доступ на чтение и запись. И всё.</p><h3 id=малые-установки class="relative group">Малые установки <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bc%d0%b0%d0%bb%d1%8b%d0%b5-%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b8 aria-label=Якорь>#</a></span></h3><p>Если вы небольшая фирма или вы только пробуете Git в вашей организации и у вас мало разработчиков, то всё достаточно просто. Один из наиболее сложных аспектов настройки Git-сервера — управление пользователями. Если вы хотите, чтобы некоторые репозитории были доступны некоторым пользователям только на чтение, а другие и на чтение, и на запись, вам может быть не очень просто привести права доступа в порядок.</p><h4 id=доступ-по-ssh class="relative group">Доступ по SSH <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%b4%d0%be%d1%81%d1%82%d1%83%d0%bf-%d0%bf%d0%be-ssh aria-label=Якорь>#</a></span></h4><p>Если у вас уже есть сервер, к которому все ваши разработчики имеют доступ по SSH, проще всего разместить ваш первый репозиторий там, поскольку вам не нужно практически ничего делать (как мы уже обсудили в предыдущем разделе). Если вы хотите более сложного управления правами доступа к вашим репозиториям, вы можете сделать это обычными правами файловой системы, предоставляемыми операционной системой вашего сервера.</p><p>Если вы хотите разместить ваши репозитории на сервер, на котором нет учётных записей для каждого в вашей команде, кому нужен доступ на запись, вы должны настроить доступ по SSH для них. Будем считать, что если у вас есть сервер, на котором вы хотите это сделать, то SSH-сервер на нём уже установлен, и через него вы имеете доступ к серверу.</p><p>Есть несколько способов дать доступ каждому в вашей команде. Первый — настроить учётные записи для каждого. Это просто, но может быть весьма обременительно. Вероятно, вы не захотите для каждого пользователя выполнять <code>adduser</code> и задавать временные пароли.</p><p>Второй способ — создать на машине одного пользователя &lsquo;git&rsquo;, попросить каждого пользователя, кому нужен доступ на запись, прислать вам открытый SSH-ключ, и добавить эти ключи в файл <code>~/.ssh/authorized_keys</code> вашего нового пользователя &lsquo;git&rsquo;. Теперь все будут иметь доступ к этой машине через пользователя &lsquo;git&rsquo;. Это никак не повлияет на данные коммита — пользователь, под которым вы соединяетесь с сервером по SSH, не затрагивает сделанные вами коммиты.</p><p>Другой способ сделать это — использовать SSH-сервер, аутентифицирующий по LDAP-серверу или любому другому централизованному источнику, который у вас может быть уже настроен. Любой способ аутентификации по SSH, какой вы только сможете придумать, должен работать, если пользователь может получить доступ к консоли.</p><h2 id=создание-открытого-ssh-ключа class="relative group">Создание открытого SSH-ключа <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%be%d1%82%d0%ba%d1%80%d1%8b%d1%82%d0%be%d0%b3%d0%be-ssh-%d0%ba%d0%bb%d1%8e%d1%87%d0%b0 aria-label=Якорь>#</a></span></h2><p>Как было уже сказано, многие Git-серверы используют аутентификацию по открытым SSH-ключам. Для того чтобы предоставить открытый ключ, пользователь должен его сгенерировать, если только это не было сделано ранее. Этот процесс похож во всех операционных системах.
Сначала вам стоит убедиться, что у вас ещё нет ключа. По умолчанию пользовательские SSH-ключи хранятся в каталоге <code>~/.ssh</code> этого пользователя. Вы можете легко проверить, есть ли у вас ключ, зайдя в этот каталог и посмотрев его содержимое:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cd ~/.ssh
</span></span><span style=display:flex><span>$ ls
</span></span><span style=display:flex><span>authorized_keys2  id_dsa       known_hosts
</span></span><span style=display:flex><span>config            id_dsa.pub
</span></span></code></pre></div><p>Ищите пару файлов с именами &ldquo;что-нибудь&rdquo; и &ldquo;что-нибудь.pub&rdquo;, где &ldquo;что-нибудь&rdquo; — обычно <code>id_dsa</code> или <code>id_rsa</code>. Файл с расширением <code>.pub</code> — это ваш открытый ключ, а второй файл — ваш секретный ключ. Если у вас нет этих файлов (или даже нет каталога <code>.ssh</code>), вы можете создать их, запустив программу <code>ssh-keygen</code>, которая входит в состав пакета SSH в системах Linux/Mac, а также поставляется в составе MSysGit для Windows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ ssh-keygen 
</span></span><span style=display:flex><span>Generating public/private rsa key pair.
</span></span><span style=display:flex><span>Enter file in which to save the key <span style=color:#f92672>(</span>/Users/schacon/.ssh/id_rsa<span style=color:#f92672>)</span>: 
</span></span><span style=display:flex><span>Enter passphrase <span style=color:#f92672>(</span>empty <span style=color:#66d9ef>for</span> no passphrase<span style=color:#f92672>)</span>: 
</span></span><span style=display:flex><span>Enter same passphrase again: 
</span></span><span style=display:flex><span>Your identification has been saved in /Users/schacon/.ssh/id_rsa.
</span></span><span style=display:flex><span>Your public key has been saved in /Users/schacon/.ssh/id_rsa.pub.
</span></span><span style=display:flex><span>The key fingerprint is:
</span></span><span style=display:flex><span>43:c5:5b:5f:b1:f1:50:43:ad:20:a6:92:6a:1f:9a:3a schacon@agadorlaptop.local
</span></span></code></pre></div><p>Сначала необходимо указать расположение файла для сохранения ключа (<code>.ssh/id_rsa</code>), затем дважды ввести пароль, который вы можете оставить пустым, если не хотите его вводить каждый раз, когда используете ключ.</p><p>Теперь каждый пользователь должен послать свой открытый ключ вам или тому, кто администрирует Git-сервер (предположим, что ваш SSH-сервер уже настроен на работу с открытыми ключами). Для этого им нужно скопировать всё содержимое файла с расширением <code>.pub</code> и отправить его по электронной почте. Открытый ключ выглядит следующим образом:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat ~/.ssh/id_rsa.pub 
</span></span><span style=display:flex><span>ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAklOUpkDHrfHY17SbrmTIpNLTGK9Tjom/BWDSU
</span></span><span style=display:flex><span>GPl+nafzlHDTYW7hdI4yZ5ew18JH4JW9jbhUFrviQzM7xlELEVf4h9lFX5QVkbPppSwg0cda3
</span></span><span style=display:flex><span>Pbv7kOdJ/MTyBlWXFCR+HAo3FXRitBqxiX1nKhXpHAZsMciLq8V6RjsNAQwdsdMFvSlVK/7XA
</span></span><span style=display:flex><span>t3FaoJoAsncM1Q9x5+3V0Ww68/eIFmb1zuUFljQJKprrX88XypNDvjYNby6vw/Pb0rwert/En
</span></span><span style=display:flex><span>mZ+AW4OZPnTPI89ZPmVMLuayrD2cE86Z/il8b+gw3r3+1nKatmIkjn2so1d01QraTlMqVSsbx
</span></span><span style=display:flex><span>NrRFi9wrf+M7Q<span style=color:#f92672>==</span> schacon@agadorlaptop.local
</span></span></code></pre></div><p>Более подробное руководство по созданию SSH-ключей на различных системах вы можете найти в <a href=http://github.com/guides/providing-your-ssh-key target=_blank rel=noreferrer>руководстве</a> GitHub по SSH-ключам на.</p><h2 id=настраиваем-сервер class="relative group">Настраиваем сервер <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%b0%d0%b8%d0%b2%d0%b0%d0%b5%d0%bc-%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80 aria-label=Якорь>#</a></span></h2><p>Давайте рассмотрим настройку доступа по SSH на стороне сервера. В этом примере мы будем использовать метод <code>authorized_keys</code> для аутентификации пользователей. Мы подразумеваем, что вы используете стандартный дистрибутив Linux типа Ubuntu. Для начала создадим пользователя &lsquo;git&rsquo; и каталог <code>.ssh</code> для этого пользователя:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo adduser git
</span></span><span style=display:flex><span>$ su git
</span></span><span style=display:flex><span>$ cd
</span></span><span style=display:flex><span>$ mkdir .ssh
</span></span></code></pre></div><p>Затем нужно добавить открытый SSH-ключ какого-нибудь разработчика в файл <code>authorized_keys</code> этого пользователя. Предположим, вы уже получили несколько ключей по электронной почте и сохранили их во временные файлы. Напомню, открытые ключи выглядят вот так:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat /tmp/id_rsa.john.pub
</span></span><span style=display:flex><span>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCB007n/ww+ouN4gSLKssMxXnBOvf9LGt4L
</span></span><span style=display:flex><span>ojG6rs6hPB09j9R/T17/x4lhJA0F3FR1rP6kYBRsWj2aThGw6HXLm9/5zytK6Ztg3RPKK+4k
</span></span><span style=display:flex><span>Yjh6541NYsnEAZuXz0jTTyAUfrtU3Z5E003C4oxOj6H0rfIF1kKI9MAQLMdpGW1GYEIgS9Ez
</span></span><span style=display:flex><span>Sdfd8AcCIicTDWbqLAcU4UpkaX8KyGlLwsNuuGztobF8m72ALC/nLF6JLtPofwFBlgc+myiv
</span></span><span style=display:flex><span>O7TCUSBdLQlgMVOFq1I2uPWQOkOWQAHukEOmfjy2jctxSDBQ220ymjaNsHT4kgtZg2AYYgPq
</span></span><span style=display:flex><span>dAv8JggJICUvax2T9va5 gsg-keypair
</span></span></code></pre></div><p>Вы просто добавляете их в свой файл <code>authorized_keys</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat /tmp/id_rsa.john.pub &gt;&gt; ~/.ssh/authorized_keys
</span></span><span style=display:flex><span>$ cat /tmp/id_rsa.josie.pub &gt;&gt; ~/.ssh/authorized_keys
</span></span><span style=display:flex><span>$ cat /tmp/id_rsa.jessica.pub &gt;&gt; ~/.ssh/authorized_keys
</span></span></code></pre></div><p>Теперь вы можете создать пустой репозиторий для них, запустив <code>git init</code> с параметром <code>--bare</code>, что инициализирует репозиторий без рабочего каталога:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cd /opt/git
</span></span><span style=display:flex><span>$ mkdir project.git
</span></span><span style=display:flex><span>$ cd project.git
</span></span><span style=display:flex><span>$ git --bare init
</span></span></code></pre></div><p>Затем Джон, Джози или Джессика могут отправить первую версию своего проекта в этот репозиторий, добавив его как удалённый и отправив ветку. Заметьте, что кто-то должен заходить на сервер и создавать голый репозиторий каждый раз, когда вы хотите добавить проект. Пусть <code>gitserver</code> — имя хоста сервера, на котором вы создали пользователя &lsquo;git&rsquo; и репозиторий. Если он находится в вашей внутренней сети, вы можете настроить DNS-запись для <code>gitserver</code>, ссылающуюся на этот сервер, и использовать эти команды:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># на компьютере Джона </span>
</span></span><span style=display:flex><span>$ cd myproject
</span></span><span style=display:flex><span>$ git init
</span></span><span style=display:flex><span>$ git add .
</span></span><span style=display:flex><span>$ git commit -m <span style=color:#e6db74>&#39;initial commit&#39;</span>
</span></span><span style=display:flex><span>$ git remote add origin git@gitserver:/opt/git/project.git
</span></span><span style=display:flex><span>$ git push origin master
</span></span></code></pre></div><p>Теперь остальные могут склонировать его и отправлять (push) туда изменения так же легко:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone git@gitserver:/opt/git/project.git
</span></span><span style=display:flex><span>$ cd project
</span></span><span style=display:flex><span>$ vim README
</span></span><span style=display:flex><span>$ git commit -am <span style=color:#e6db74>&#39;fix for the README file&#39;</span>
</span></span><span style=display:flex><span>$ git push origin master
</span></span></code></pre></div><p>Этим способом вы можете быстро получить Git-сервер с доступом на чтение/запись для небольшой группы разработчиков.</p><p>В качестве дополнительной меры предосторожности вы можете ограничить возможности пользователя &lsquo;git&rsquo; только действиями, связанными с Git&rsquo;ом, с помощью ограниченной оболочки <code>git-shell</code>, поставляемой вместе с Git&rsquo;ом. Если вы выставите её в качестве командного интерпретатора пользователя &lsquo;git&rsquo;, то этот пользователь не сможет получить доступ к обычной командной оболочке на вашем сервере. Чтобы её использовать, укажите <code>git-shell</code> вместо bash или csh в качестве командной оболочки пользователя. Для этого вы должны отредактировать файл <code>/etc/passwd</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo vim /etc/passwd
</span></span></code></pre></div><p>В конце вы должны найти строку, похожую на эту:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>git❌1000:1000::/home/git:/bin/sh
</span></span></code></pre></div><p>Замените <code>/bin/sh</code> на <code>/usr/bin/git-shell</code> (или запустите <code>which git-shell</code>, чтобы проверить, куда он установлен). Отредактированная строка должна выглядеть следующим образом:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>git❌1000:1000::/home/git:/usr/bin/git-shell
</span></span></code></pre></div><p>Теперь пользователь &lsquo;git&rsquo; может использовать SSH-соединение только для работы с Git-репозиториями и не может зайти на машину. Вы можете попробовать и увидите, что вход в систему отклонён:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ ssh git@gitserver
</span></span><span style=display:flex><span>fatal: What <span style=color:#66d9ef>do</span> you think I am? A shell?
</span></span><span style=display:flex><span>Connection to gitserver closed.
</span></span></code></pre></div><h2 id=открытый-доступ class="relative group">Открытый доступ <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%be%d1%82%d0%ba%d1%80%d1%8b%d1%82%d1%8b%d0%b9-%d0%b4%d0%be%d1%81%d1%82%d1%83%d0%bf aria-label=Якорь>#</a></span></h2><p>Что, если вы хотите иметь анонимный доступ к вашему проекту на чтение? Возможно, вместо размещения внутреннего закрытого проекта, вы хотите разместить проект с открытым исходным кодом. Или, может быть, у вас есть автоматизированные серверы сборки или серверы непрерывной интеграции, которые часто изменяются, и вы не хотите постоянно перегенерировать SSH-ключи, а вы просто хотите добавить анонимный доступ на чтение.</p><p>Вероятно, наиболее простой способ для небольших конфигураций — запустить статический веб-сервер, указав в качестве корневого каталога для документов каталог, в котором расположены ваши Git-репозитории, и задействовав перехватчик <code>post-update</code>, как было показано в первой части этой лекции. Давайте продолжим работу с предыдущего примера. Допустим, ваши репозитории расположены в каталоге <code>/opt/git</code>, и сервер Apache запущен на вашей машине. Повторюсь, вы можете использовать любой веб-сервер, но в качестве примера мы покажем несколько основных конфигураций Apache, которые покажут основную идею.</p><p>Для начала вам следует включить перехватчик:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cd project.git
</span></span><span style=display:flex><span>$ mv hooks/post-update.sample hooks/post-update
</span></span><span style=display:flex><span>$ chmod a+x hooks/post-update
</span></span></code></pre></div><p>Что делает перехватчик <code>post-update</code>? Обычно он выглядит так:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat .git/hooks/post-update 
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/sh</span>
</span></span><span style=display:flex><span>exec git-update-server-info
</span></span></code></pre></div><p>Это означает, что когда вы отправляете что-то с помощью <code>git push</code> на сервер по SSH, Git будет запускать эту команду, чтобы обновить файлы необходимые для скачивания по HTTP.</p><p>Затем вы должны добавить запись VirtualHost в конфигурацию вашего Apache с корневым каталогом документов в каталоге с вашими Git-проектами. Здесь мы подразумеваем, что ваш DNS-сервер настроен на отсылку <code>*.gitserver</code> на ту машину, на которой всё это запущено:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>&lt;VirtualHost *:80&gt;
</span></span><span style=display:flex><span>    ServerName git.gitserver
</span></span><span style=display:flex><span>    DocumentRoot /opt/git
</span></span><span style=display:flex><span>    &lt;Directory /opt/git/&gt;
</span></span><span style=display:flex><span>        Order allow, deny
</span></span><span style=display:flex><span>        allow from all
</span></span><span style=display:flex><span>    &lt;/Directory&gt;
</span></span><span style=display:flex><span>&lt;/VirtualHost&gt;
</span></span></code></pre></div><p>Вам также понадобится установить Unix-группу для каталога <code>/opt/git</code> в <code>www-data</code>, чтобы ваш веб-сервер получил доступ на чтение этих каталогов, поскольку (по умолчанию) Apache запускает CGI-сценарии от имени такого пользователя:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ chgrp -R www-data /opt/git
</span></span></code></pre></div><p>После перезапуска Apache вы должны получить возможность склонировать ваши репозитории из этого каталога указывая их в URL:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone http://git.gitserver/project.git
</span></span></code></pre></div><p>Таким образом, вы можете настроить доступ на чтение по HTTP к любому из ваших проектов для значительного количества пользователей за несколько минут. Другой простой способ дать открытый неаутентифицируемый доступ — использовать Git-демон, однако это требует запуска процесса демона. Мы рассмотрим этот вариант в следующем разделе, если вы предпочитаете этот вариант.</p><h2 id=gitweb class="relative group">GitWeb <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#gitweb aria-label=Якорь>#</a></span></h2><p>Теперь, когда у вас есть основной доступ на чтение и запись и доступ только на чтение к вашему проекту, вероятно, вы захотите настроить простой веб-визуализатор. Git поставляется в комплекте с CGI-сценарием, называющимся GitWeb, который обычно используется для этого. Вы можете увидеть GitWeb в действии на таких сайтах как <code>http://git.kernel.org</code>.</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0401-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-1. Веб-интерфейс GitWeb.</p></blockquote><p>Если вы хотите проверить, как GitWeb будет выглядеть для вашего проекта, Git поставляется с командой для быстрой установки временного экземпляра, если в вашей системе есть легковесный веб-сервер, такой как <code>lighttpd</code> или <code>webrick</code>. На машинах с Linux&rsquo;ом <code>lighttpd</code> часто установлен, поэтому возможно вы сможете его запустить, выполнив <code>git instaweb</code> в каталоге с вашим проектом. Если вы используете Mac, Leopard поставляется с предустановленным Ruby, поэтому <code>webrick</code> может быть лучшим выбором. Чтобы запустить <code>instaweb</code> не с <code>lighttpd</code>, вы можете запустить команду с параметром <code>--httpd</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git instaweb --httpd<span style=color:#f92672>=</span>webrick
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>2009-02-21 10:02:21<span style=color:#f92672>]</span> INFO  WEBrick 1.3.1
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>2009-02-21 10:02:21<span style=color:#f92672>]</span> INFO  ruby 1.8.6 <span style=color:#f92672>(</span>2008-03-03<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>universal-darwin9.0<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>Это запустит сервер HTTPD на порте 1234 и затем запустит веб-браузер, открытый на этой странице. Это очень просто. Когда вы закончили и хотите остановить сервер, вы можете запустить ту же команду с параметром <code>--stop</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git instaweb --httpd<span style=color:#f92672>=</span>webrick --stop
</span></span></code></pre></div><p>Если вы хотите иметь постоянно работающий веб-интерфейс на сервере для своей команды или для своего проекта с открытым кодом, вам необходимо установить CGI-сценарий на своём веб-сервере. В некоторых дистрибутивах Linux есть пакет <code>gitweb</code>, который можно установить, используя <code>apt</code> или <code>yum</code>, так что вы можете попробовать сначала этот способ. Мы рассмотрим установку GitWeb вручную очень быстро. Для начала вам нужно получить исходный код Git&rsquo;а, с которым поставляется GitWeb, и сгенерировать CGI-сценарий под свою систему:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone git://git.kernel.org/pub/scm/git/git.git
</span></span><span style=display:flex><span>$ cd git/
</span></span><span style=display:flex><span>$ make GITWEB_PROJECTROOT<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/opt/git&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>        prefix<span style=color:#f92672>=</span>/usr gitweb
</span></span><span style=display:flex><span>$ sudo cp -Rf gitweb /var/www/
</span></span></code></pre></div><p>Помните, что вы должны указать команде, где расположены ваши Git-репозитории с помощью переменной <code>GITWEB_PROJECTROOT</code>. Теперь нужно настроить Apache на использование этого сценария, для чего вы можете добавить виртуальный хост:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>&lt;VirtualHost *:80&gt;
</span></span><span style=display:flex><span>    ServerName gitserver
</span></span><span style=display:flex><span>    DocumentRoot /var/www/gitweb
</span></span><span style=display:flex><span>    &lt;Directory /var/www/gitweb&gt;
</span></span><span style=display:flex><span>        Options ExecCGI +FollowSymLinks +SymLinksIfOwnerMatch
</span></span><span style=display:flex><span>        AllowOverride All
</span></span><span style=display:flex><span>        order allow,deny
</span></span><span style=display:flex><span>        Allow from all
</span></span><span style=display:flex><span>        AddHandler cgi-script cgi
</span></span><span style=display:flex><span>        DirectoryIndex gitweb.cgi
</span></span><span style=display:flex><span>    &lt;/Directory&gt;
</span></span><span style=display:flex><span>&lt;/VirtualHost&gt;
</span></span></code></pre></div><p>Повторюсь, GitWeb может быть установлен на любой веб-сервер, совместимый с CGI. Если вы предпочитаете использовать что-то другое, настройка не должна стать для вас проблемой. К этому моменту вы должны иметь возможность зайти на <code>http://gitserver/</code> для просмотра ваших репозиториев онлайн, а также использовать <code>http://git.gitserver</code> для клонирования и извлечения данных для ваших репозиториев по HTTP.</p><h2 id=gitosis class="relative group">Gitosis <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#gitosis aria-label=Якорь>#</a></span></h2><p>Хранение открытых ключей всех пользователей в <code>authorized_keys</code> для предоставления доступа работает хорошо лишь на время. Когда у вас сотни пользователей, это скорее похоже на пытку. Вы должны заходить на сервер каждый раз, и нет никакого разграничения доступа — все перечисленные в файле имеют доступ на чтение и на запись к каждому проекту.</p><p>На этой стадии вы можете захотеть обратиться к широко используемому ПО под названием Gitosis. Gitosis — это просто набор сценариев (scripts), который поможет вам управляться с файлом <code>authorized_keys</code> и реализовать простой контроль доступа. Действительно интересно, что добавление людей и настройка доступа для них осуществляется не через веб-интерфейс, а с помощью специального git-репозитория. Вы настраиваете информацию в этом проекте и, когда вы отправляете её в репозиторий, Gitosis, исходя из неё, перенастраивает сервер, что круто.</p><p>Установка Gitosis&rsquo;а — не самая простая задача, хотя и не слишком сложная. Проще всего использовать под него Linux-сервер — в наших примерах используется сервер Ubuntu 8.10 в начальной конфигурации.</p><p>Gitosis&rsquo;у нужны некоторые инструменты для Python&rsquo;а, так что первым делом вы должны установить для Python&rsquo;а пакет setuptools, который в Ubuntu называется python-setuptools:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ apt-get install python-setuptools
</span></span></code></pre></div><p>Затем вы клонируете и устанавливаете Gitosis с главного сайта проекта:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone https://github.com/tv42/gitosis.git
</span></span><span style=display:flex><span>$ cd gitosis
</span></span><span style=display:flex><span>$ sudo python setup.py install
</span></span></code></pre></div><p>Это установит несколько исполняемых файлов, которые Gitosis будет использовать. Затем Gitosis хочет расположить свои репозитории в каталоге <code>/home/git</code>, что неплохо. Но вы уже установили репозитории в <code>/opt/git</code>, так что вместо перенастройки всего на свете вы сделаете символическую ссылку:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ ln -s /opt/git /home/git/repositories
</span></span></code></pre></div><p>Gitosis будет управлять ключами за вас, так что вы должны удалить текущий файл, добавить ключи снова позже и предоставить Gitosis&rsquo;у управлять файлом <code>authorized_keys</code> автоматически. Сейчас просто уберите этот файл с дороги:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ mv /home/git/.ssh/authorized_keys /home/git/.ssh/ak.bak
</span></span></code></pre></div><p>Затем вы должны вернуть пользователю git его командную оболочку, если вы меняли её на команду <code>git-shell</code>. Люди всё так же не смогут выполнить вход, но для вас это будет контролировать Gitosis. Итак, давайте поменяем эту строку в файле &lsquo;/etc/passwd&rsquo;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>git❌1000:1000::/home/git:/usr/bin/git-shell
</span></span></code></pre></div><p>обратно на эту:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>git❌1000:1000::/home/git:/bin/sh
</span></span></code></pre></div><p>Теперь самое время инициализировать Gitosis. Сделаете это, выполнив команду <code>gitosis-init</code> со своим персональным открытым ключом. Если вашего открытого ключа ещё нет на сервере, вам нужно будет скопировать его туда:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo -H -u git gitosis-init &lt; /tmp/id_dsa.pub
</span></span><span style=display:flex><span>Initialized empty Git repository in /opt/git/gitosis-admin.git/
</span></span><span style=display:flex><span>Reinitialized existing Git repository in /opt/git/gitosis-admin.git/
</span></span></code></pre></div><p>Это позволит пользователю с таким ключом изменять главный Git-репозиторий, который управляет настройками Gitosis&rsquo;а. Затем вы должны вручную установить бит исполнения на сценарий <code>post-update</code> в новом управляющем репозитории.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo chmod <span style=color:#ae81ff>755</span> /opt/git/gitosis-admin.git/hooks/post-update
</span></span></code></pre></div><p>Всё готово. Если вы всё настроили правильно, вы можете попытаться соединиться по SSH с вашим сервером под тем пользователем, для которого вы добавили открытый ключ, чтобы инициализировать Gitosis. Вы должны увидеть что-то вроде этого:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ ssh git@gitserver
</span></span><span style=display:flex><span>PTY allocation request failed on channel <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>fatal: unrecognized command <span style=color:#e6db74>&#39;gitosis-serve schacon@quaternion&#39;</span>
</span></span><span style=display:flex><span>  Connection to gitserver closed.
</span></span></code></pre></div><p>Это означает, что Gitosis узнал вас, но не пустил, потому что вы не пытались выполнить ни одну из команд Git&rsquo;а. Ну так давайте выполним настоящую команду Git&rsquo;а — вы склонируете управляющий репозиторий Gitosis:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># на вашем локальном компьютере</span>
</span></span><span style=display:flex><span>$ git clone git@gitserver:gitosis-admin.git
</span></span></code></pre></div><p>Теперь у вас есть каталог с именем <code>gitosis-admin</code>, в котором есть две главные части:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cd gitosis-admin
</span></span><span style=display:flex><span>$ find .
</span></span><span style=display:flex><span>./gitosis.conf
</span></span><span style=display:flex><span>./keydir
</span></span><span style=display:flex><span>./keydir/scott.pub
</span></span></code></pre></div><p>Файл <code>gitosis.conf</code> — файл настройки, который используется, чтобы указать пользователей, репозитории и права доступа. В каталоге <code>keydir</code> должны храниться открытые ключи всех пользователей, у которых есть какой-либо доступ к вашим репозиториям — по файлу на пользователя. Имя файла в <code>keydir</code> (в предыдущем примере <code>scott.pub</code>) у вас будет отличаться — Gitosis берёт это имя из описания в конце открытого ключа, который был импортирован сценарием <code>gitosis-init</code>.</p><p>Если вы посмотрите в файл <code>gitosis.conf</code>, там должна быть указана только информация о проекте <code>gitosis-admin</code>, который вы только что склонировали:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat gitosis.conf 
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>gitosis<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>group gitosis-admin<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>writable <span style=color:#f92672>=</span> gitosis-admin
</span></span><span style=display:flex><span>members <span style=color:#f92672>=</span> scott
</span></span></code></pre></div><p>Это показывает, что пользователь &lsquo;scott&rsquo; — пользователь, чьим открытым ключом вы инициализировали Gitosis — единственный, кто имеет доступ к проекту <code>gitosis-admin</code>.</p><p>А теперь давайте добавим новый проект. Добавьте новую секцию с названием <code>mobile</code> и перечислите в ней всех разработчиков из команды, занимающейся мобильными устройствами, а также проекты, к которым этим разработчикам нужно иметь доступ. Поскольку <code>scott</code> — пока что единственный пользователь в системе, добавьте его как единственного члена и создайте новый проект под названием <code>iphone_project</code>, чтобы ему было с чем начать работать:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>group mobile<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>writable <span style=color:#f92672>=</span> iphone_project
</span></span><span style=display:flex><span>members <span style=color:#f92672>=</span> scott
</span></span></code></pre></div><p>Когда вы вносите изменения в проект <code>gitosis-admin</code>, вы должны зафиксировать изменения и отправить их на сервер, чтобы они возымели эффект:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git commit -am <span style=color:#e6db74>&#39;add iphone_project and mobile group&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>master<span style=color:#f92672>]</span>: created 8962da8: <span style=color:#e6db74>&#34;changed name&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#ae81ff>1</span> files changed, <span style=color:#ae81ff>4</span> insertions<span style=color:#f92672>(</span>+<span style=color:#f92672>)</span>, <span style=color:#ae81ff>0</span> deletions<span style=color:#f92672>(</span>-<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>$ git push
</span></span><span style=display:flex><span>Counting objects: 5, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>Compressing objects: 100% <span style=color:#f92672>(</span>2/2<span style=color:#f92672>)</span>, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>Writing objects: 100% <span style=color:#f92672>(</span>3/3<span style=color:#f92672>)</span>, <span style=color:#ae81ff>272</span> bytes, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>Total <span style=color:#ae81ff>3</span> <span style=color:#f92672>(</span>delta 1<span style=color:#f92672>)</span>, reused <span style=color:#ae81ff>0</span> <span style=color:#f92672>(</span>delta 0<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>To git@gitserver:/opt/git/gitosis-admin.git
</span></span><span style=display:flex><span>   fb27aec..8962da8  master -&gt; master
</span></span></code></pre></div><p>Вы можете сделать свой первый push в новый проект <code>iphone_project</code>, добавив свой сервер в качестве удалённого (remote) в локальную версию проекта и выполнив <code>git push</code>. Вам больше не нужно вручную создавать голые репозитории на сервере для новых проектов — Gitosis создаёт их сам автоматически, когда видит первый push:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git remote add origin git@gitserver:iphone_project.git
</span></span><span style=display:flex><span>$ git push origin master
</span></span><span style=display:flex><span>Initialized empty Git repository in /opt/git/iphone_project.git/
</span></span><span style=display:flex><span>Counting objects: 3, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>Writing objects: 100% <span style=color:#f92672>(</span>3/3<span style=color:#f92672>)</span>, <span style=color:#ae81ff>230</span> bytes, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>Total <span style=color:#ae81ff>3</span> <span style=color:#f92672>(</span>delta 0<span style=color:#f92672>)</span>, reused <span style=color:#ae81ff>0</span> <span style=color:#f92672>(</span>delta 0<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>To git@gitserver:iphone_project.git
</span></span><span style=display:flex><span> * <span style=color:#f92672>[</span>new branch<span style=color:#f92672>]</span>      master -&gt; master
</span></span></code></pre></div><p>Заметьте, что вам не нужно указывать путь (фактически, если вы это сделаете, то оно не сработает), только двоеточие и имя проекта — Gitosis найдёт его за вас.</p><p>Вы хотите работать над проектом с вашими друзьями, так что вам нужно снова добавить их открытые ключи. Но вместо того, чтобы вручную добавлять их к файлу <code>~/.ssh/authorized_keys</code> на вашем сервере, добавьте их, один файл на ключ, в каталог <code>keydir</code>. То, как вы назовёте ключи, определит, как вы будете ссылаться на пользователей в <code>gitosis.conf</code>. Давайте по-новому добавим открытые ключи для Джона, Джози и Джессики:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cp /tmp/id_rsa.john.pub keydir/john.pub
</span></span><span style=display:flex><span>$ cp /tmp/id_rsa.josie.pub keydir/josie.pub
</span></span><span style=display:flex><span>$ cp /tmp/id_rsa.jessica.pub keydir/jessica.pub
</span></span></code></pre></div><p>Теперь вы можете добавить их всех в вашу &lsquo;мобильную&rsquo; команду, чтобы они имели доступ на чтение и запись в <code>iphone_project</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>group mobile<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>writable <span style=color:#f92672>=</span> iphone_project
</span></span><span style=display:flex><span>members <span style=color:#f92672>=</span> scott john josie jessica
</span></span></code></pre></div><p>После того, как вы зафиксируете и отправите изменения, все четыре пользователя будут иметь возможность читать и писать в проект.</p><p>В Gitosis&rsquo;е также есть простой контроль доступа. Если вы хотите, чтобы Джон имел только доступ на чтение к этому проекту, вы можете вместо этого сделать:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>group mobile<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>writable <span style=color:#f92672>=</span> iphone_project
</span></span><span style=display:flex><span>members <span style=color:#f92672>=</span> scott josie jessica
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>group mobile_ro<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>readonly <span style=color:#f92672>=</span> iphone_project
</span></span><span style=display:flex><span>members <span style=color:#f92672>=</span> john
</span></span></code></pre></div><p>Теперь Джон может клонировать проект и получать обновления, но Gitosis не позволит ему отправлять изменения обратно в проект. Вы можете создать таких групп сколько хотите, каждую содержащую разные проекты и пользователей. Вы также можете указать другую группу в качестве одного из пользователей (используя <code>@</code> как префикс), чтобы автоматически добавить всех её членов:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>group mobile_committers<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>members <span style=color:#f92672>=</span> scott josie jessica
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>group mobile<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>writable  <span style=color:#f92672>=</span> iphone_project
</span></span><span style=display:flex><span>members   <span style=color:#f92672>=</span> @mobile_committers
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>group mobile_2<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>writable  <span style=color:#f92672>=</span> another_iphone_project
</span></span><span style=display:flex><span>members   <span style=color:#f92672>=</span> @mobile_committers john
</span></span></code></pre></div><p>Если у вас возникли какие-то проблемы, полезным может быть добавить <code>loglevel=DEBUG</code> в секции <code>[gitosis]</code>. Если вы потеряли доступ к отправке, отправив неверную конфигурацию, вы можете вручную поправить файл <code>/home/git/.gitosis.conf</code> на сервере — файл, из которого Gitosis читает свою информацию. Отправка в проект берёт файл <code>gitosis.conf</code>, который вы только что отправили, и помещает его туда. Если вы отредактируете этот файл вручную, он останется таким до следующей успешной отправки в проект <code>gitosis-admin</code>.</p><h2 id=gitolite class="relative group">Gitolite <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#gitolite aria-label=Якорь>#</a></span></h2><p>В этом разделе мы вкратце рассмотрим Gitolite, научимся его устанавливать и настраивать. Gitolite представляет собой дополнительную прослойку поверх Git&rsquo;а, обеспечивающую широкие возможности по управлению правами доступа. Gitolite для авторизации использует <code>sshd</code> или <code>httpd</code>.</p><p>Gitolite даёт возможность назначать права доступа не только для всего репозитория, но и для отдельных веток или имён меток внутри любого репозитория. То есть вы можете указать, что определённые люди (или группы людей) могут отправлять (push) определённые &ldquo;ссылки&rdquo; (ветки или метки), а остальные нет.</p><h3 id=установка class="relative group">Установка <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0 aria-label=Якорь>#</a></span></h3><p>Установить Gitolite очень просто, даже не читая идущую с ним обширную документацию. Вам понадобится аккаунт на сервере с каким-нибудь Unix&rsquo;ом. Вам не нужен root-доступ, если Git, Perl и OpenSSH-совместимый SSH-сервер уже установлены. Далее в примерах мы будем использовать аккаунт <code>git</code> на хосте с именем <code>gitserver</code>.</p><p>Gitolite несколько необычен, по крайней мере, в сравнении с другим &ldquo;серверным&rdquo; ПО — доступ осуществляется по SSH, и, следовательно, каждый пользователь на сервере является потенциальным &ldquo;gitolite-хостом&rdquo;. В этом разделе мы рассмотрим самый простой метод установки; про остальные методы можно прочитать в документации.</p><p>Для начала, создайте пользователя с именем <code>git</code> на своём сервере и войдите в систему под этим пользователем. Скопируйте свой открытый ключ (это файл <code>~/.ssh/id_rsa.pub</code>, если вы сгенерировали его с помощью просто <code>ssh-keygen</code> без изменения параметров) со своего рабочего компьютера и переименуйте его в <code>&lt;вашеимя>.pub</code> (в нашем примере это будет файл <code>scott.pub</code>). Затем выполните следующие команды:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git clone git://github.com/sitaramc/gitolite
</span></span><span style=display:flex><span>$ gitolite/install -ln
</span></span><span style=display:flex><span>    <span style=color:#75715e># предполагает, что $HOME/bin существует и находится в $PATH</span>
</span></span><span style=display:flex><span>$ gitolite setup -pk $HOME/scott.pub
</span></span></code></pre></div><p>Последняя из команд создаст на сервере новый Git-репозиторий с именем <code>gitolite-admin</code>.</p><p>В завершение, вернитесь на свой рабочий компьютер и выполните там <code>git clone git@gitserver:gitolite-admin</code>. И всё! Gitolite теперь установлен на сервере, а на вашей рабочей станции теперь есть новый репозиторий, который называется <code>gitolite-admin</code>. Администрировать свой установленный Gitolite нужно, внося изменения в этот репозиторий и отправляя их на сервер.</p><h3 id=изменение-параметров-установки class="relative group">Изменение параметров установки <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%b0%d1%80%d0%b0%d0%bc%d0%b5%d1%82%d1%80%d0%be%d0%b2-%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b8 aria-label=Якорь>#</a></span></h3><p>Хотя быстрая установка с параметрами по умолчанию подходит для большинства людей, есть несколько способов изменения параметров установки, если вам это нужно. Если опустить опцию <code>-q</code>, вы получите &ldquo;подробную&rdquo; установку с детальной информацией о том, что происходит на каждом шаге. Подробный режим также позволяет изменить некоторые параметры на стороне сервера такие, как расположение репозиториев, с помощью редактирования &ldquo;rc&rdquo; файла, используемого сервером. Этот &ldquo;rc&rdquo; файл содержит развёрнутые комментарии так, чтобы вы легко смогли сделать любые изменения, сохранить их и продолжить. Этот файл также содержит различные настройки, которые вы можете изменить, чтобы активировать или выключить некоторые &ldquo;продвинутые&rdquo; функции Gitolite&rsquo;а.</p><h3 id=конфигурационный-файл-и-правила-контроля-доступа class="relative group">Конфигурационный файл и правила контроля доступа <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%ba%d0%be%d0%bd%d1%84%d0%b8%d0%b3%d1%83%d1%80%d0%b0%d1%86%d0%b8%d0%be%d0%bd%d0%bd%d1%8b%d0%b9-%d1%84%d0%b0%d0%b9%d0%bb-%d0%b8-%d0%bf%d1%80%d0%b0%d0%b2%d0%b8%d0%bb%d0%b0-%d0%ba%d0%be%d0%bd%d1%82%d1%80%d0%be%d0%bb%d1%8f-%d0%b4%d0%be%d1%81%d1%82%d1%83%d0%bf%d0%b0 aria-label=Якорь>#</a></span></h3><p>Теперь, когда установка завершена, перейдите в клон репозитория <code>gitolite-admin</code> на вашем рабочем компьютере и осмотритесь, чтобы выяснить, что же вы получили:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cd ~/gitolite-admin/
</span></span><span style=display:flex><span>$ ls
</span></span><span style=display:flex><span>conf/  keydir/
</span></span><span style=display:flex><span>$ find conf keydir -type f
</span></span><span style=display:flex><span>conf/gitolite.conf
</span></span><span style=display:flex><span>keydir/scott.pub
</span></span><span style=display:flex><span>$ cat conf/gitolite.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>repo gitolite-admin
</span></span><span style=display:flex><span>    RW+                 <span style=color:#f92672>=</span> scott
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>repo testing
</span></span><span style=display:flex><span>    RW+                 <span style=color:#f92672>=</span> @all
</span></span></code></pre></div><p>Заметьте, что &ldquo;scott&rdquo; (имя файла открытого ключа, использовавшееся ранее при запуске команды <code>gitolite setup</code>) имеет права на чтение и запись в репозиторий <code>gitolite-admin</code>, а также файл с открытым ключом с таким же именем.</p><p>Добавить нового пользователя просто. Чтобы добавить пользователя &ldquo;alice&rdquo;, возьмите её ключ, переименуйте его в <code>alice.pub</code> и положите в каталог <code>keydir</code> клона репозитория <code>gitolite-admin</code> на вашем компьютере. Выполните <code>add</code>, <code>commit</code>, отправьте изменения, и пользователь добавлен.</p><p>Синтаксис конфигурационного файла для Gitolite&rsquo;а подробно продокументирован, так что мы рассмотрим здесь только основные моменты.</p><p>Вы можете сгруппировать пользователей или репозитории для удобства. Имена групп совсем как макросы; когда вы их определяете, даже неважно, определяют ли они проекты или пользователей; это различие делается, только когда вы <em>используете</em> &ldquo;макрос&rdquo;.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>@oss_repos      <span style=color:#f92672>=</span> linux perl rakudo git gitolite
</span></span><span style=display:flex><span>@secret_repos   <span style=color:#f92672>=</span> fenestra pear
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>@admins         <span style=color:#f92672>=</span> scott
</span></span><span style=display:flex><span>@interns        <span style=color:#f92672>=</span> ashok
</span></span><span style=display:flex><span>@engineers      <span style=color:#f92672>=</span> sitaram dilbert wally alice
</span></span><span style=display:flex><span>@staff          <span style=color:#f92672>=</span> @admins @engineers @interns
</span></span></code></pre></div><p>Вы можете контролировать права доступа на уровне &ldquo;ссылок&rdquo; (то, что находится в .git/refs/). В следующем примере стажёры (группа @interns) могут отправлять (push) только ветку &ldquo;int&rdquo;. Инженеры (группа @engineers) могут отправлять любую ветку, чьё имя начинается с &ldquo;eng-&rdquo;, а также метки, начинающиеся с &ldquo;rc&rdquo; и затем содержащие цифры. Администраторы (группа @admins) могут делать всё с любыми ссылками (в том числе откатывать назад).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>repo @oss_repos
</span></span><span style=display:flex><span>    RW  int$                <span style=color:#f92672>=</span> @interns
</span></span><span style=display:flex><span>    RW  eng-                <span style=color:#f92672>=</span> @engineers
</span></span><span style=display:flex><span>    RW  refs/tags/rc<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]</span>   <span style=color:#f92672>=</span> @engineers
</span></span><span style=display:flex><span>    RW+                     <span style=color:#f92672>=</span> @admins
</span></span></code></pre></div><p>Выражение после <code>RW</code> или <code>RW+</code> — это регулярное выражение (regex), с которым сопоставляется имя отправляемой ссылки (ref). Поэтому мы называем его &ldquo;refex&rdquo;! Конечно, &ldquo;refex&rdquo; может быть гораздо более сложным, чем показано здесь, так что не переусердствуйте с ними, если вы не очень хорошо знакомы с регулярными выражениями Perl.</p><p>К тому же, как вы уже, наверное, догадались, Gitolite для удобства дописывает в начале регулярного выражения <code>refs/heads/</code>, если оно не начинается с <code>refs/</code>.</p><p>Важной особенностью синтаксиса конфигурационного файла является то, что все правила для репозитория не обязательно должны находиться в одном месте. Вы можете держать все общие вещи вместе, как, например, правила для всех <code>oss_repos</code> выше, а потом добавить уточняющие правила для отдельных случаев следующим образом:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>repo gitolite
</span></span><span style=display:flex><span>    RW+                     <span style=color:#f92672>=</span> sitaram
</span></span></code></pre></div><p>Это правило будет добавлено к набору правил для репозитория <code>gitolite</code>.</p><p>В данный момент вы, возможно, задаётесь вопросом: &ldquo;Каким образом правила контроля доступа применяются на самом деле?&rdquo; — так что давайте вкратце рассмотрим это.</p><p>В Gitolite&rsquo;е есть два уровня контроля доступа. Первый — на уровне репозитория; если у вас есть доступ на чтение (или запись) к <em>любой</em> ссылке в репозитории, то у вас есть доступ на чтение (или запись) к этому репозиторию.</p><p>Второй уровень применим только к доступу на запись и осуществляется по веткам или меткам внутри репозитория. Имя пользователя, запрашиваемый уровень доступа (<code>W</code> или <code>+</code>) и имя ссылки, которая будет обновлена, известны. Правила доступа проверяются в порядке их появления в конфигурационном файле, в поисках совпадений для этой комбинации (но помните, что имя ссылки сопоставляется с регулярным выражением, а не просто строкой). Если совпадение найдено, отправка (push) проходит успешно. При неудачном исходе доступ запрещается.</p><h3 id=продвинутый-контроль-доступа-с-запрещающими-правилами class="relative group">Продвинутый контроль доступа с запрещающими правилами <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bf%d1%80%d0%be%d0%b4%d0%b2%d0%b8%d0%bd%d1%83%d1%82%d1%8b%d0%b9-%d0%ba%d0%be%d0%bd%d1%82%d1%80%d0%be%d0%bb%d1%8c-%d0%b4%d0%be%d1%81%d1%82%d1%83%d0%bf%d0%b0-%d1%81-%d0%b7%d0%b0%d0%bf%d1%80%d0%b5%d1%89%d0%b0%d1%8e%d1%89%d0%b8%d0%bc%d0%b8-%d0%bf%d1%80%d0%b0%d0%b2%d0%b8%d0%bb%d0%b0%d0%bc%d0%b8 aria-label=Якорь>#</a></span></h3><p>До сих пор у нас были только права вида <code>R</code>, <code>RW</code> или <code>RW+</code>. Однако в Gitolite&rsquo;е есть другие права доступа: <code>-</code> означающий &ldquo;запретить&rdquo;. Это даёт гораздо больше возможностей в обмен на большую сложность, так как теперь отсутствие разрешающего правила — не <em>единственный</em> вариант, при котором пользователю может быть отказано в доступе, так что <em>порядок правил теперь имеет значение</em>!</p><p>Предположим, в описанной выше ситуации мы хотим, чтобы инженеры могли откатить назад любую ветку, <em>кроме</em> <code>master</code> и <code>integ</code>. Вот как это сделать:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>    RW  master integ    <span style=color:#f92672>=</span> @engineers
</span></span><span style=display:flex><span>    -   master integ    <span style=color:#f92672>=</span> @engineers
</span></span><span style=display:flex><span>    RW+                 <span style=color:#f92672>=</span> @engineers
</span></span></code></pre></div><p>Снова, вы просто идёте по правилам сверху вниз, пока не наткнётесь на соответствующее вашему режиму доступа или на запрет. Неоткатывающий push в <code>master</code> или <code>integ</code> разрешается первым правилом. Откатывающий push для этих ссылок не соответствует первому правилу, переходит ко второму и поэтому запрещается. Любой push (откатывающий или неоткатывающий) по ссылкам, отличным от <code>master</code> и <code>integ</code>, не совпадёт с первыми двумя правилами, а третье правило его разрешает.</p><h3 id=ограничение-pushей-на-основе-изменённых-файлов class="relative group">Ограничение push&rsquo;ей на основе изменённых файлов <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%be%d0%b3%d1%80%d0%b0%d0%bd%d0%b8%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-push%d0%b5%d0%b9-%d0%bd%d0%b0-%d0%be%d1%81%d0%bd%d0%be%d0%b2%d0%b5-%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d1%91%d0%bd%d0%bd%d1%8b%d1%85-%d1%84%d0%b0%d0%b9%d0%bb%d0%be%d0%b2 aria-label=Якорь>#</a></span></h3><p>Вдобавок к ограничению веток, в которые пользователю можно отправлять изменения, вы можете также ограничить файлы, которые он может трогать. Например, возможно, Makefile (или какая-то другая программа) не предназначен для изменения кем угодно, так как многие вещи зависят от него или сломаются, если изменения не будут сделаны <em>правильно</em>. Вы можете сказать Gitolite&rsquo;у:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>repo foo
</span></span><span style=display:flex><span>    RW                      <span style=color:#f92672>=</span>   @junior_devs @senior_devs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    -   VREF/NAME/Makefile  <span style=color:#f92672>=</span>   @junior_devs
</span></span></code></pre></div><p>Стоит предостеречь тех, кто пользовался старыми версиями Gitolite&rsquo;а, о том, что в новых версиях поведение этой функции было сильно изменено. Подробнее об этих изменениях можно узнать в руководстве по миграции.</p><h3 id=персональные-ветки class="relative group">Персональные ветки <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bf%d0%b5%d1%80%d1%81%d0%be%d0%bd%d0%b0%d0%bb%d1%8c%d0%bd%d1%8b%d0%b5-%d0%b2%d0%b5%d1%82%d0%ba%d0%b8 aria-label=Якорь>#</a></span></h3><p>Gitolite также имеет средство, которое называется &ldquo;персональные ветки&rdquo; (или даже &ldquo;персональное пространство имён веток&rdquo;), которое может быть весьма полезным в корпоративных средах.</p><p>Очень часто обмен кодом в мире Git&rsquo;а происходит через запросы &ldquo;пожалуйста, заберите (pull)&rdquo;. В корпоративных средах, однако, неаутентифицированный доступ под строгим запретом, и рабочая станция разработчика не может выполнить аутентификацию. Так что вы вынуждены отправить (push) работу на центральный сервер и попросить кого-нибудь забрать (pull) её оттуда.</p><p>Это обычно вызывает такой же беспорядок с именами веток, что и в централизованных СКВ, плюс настройка прав доступа для этого становится ежедневной обязанностью админа.</p><p>Gitolite позволяет определить &ldquo;персональный&rdquo; или &ldquo;рабочий&rdquo; префикс пространства имён для каждого разработчика (например, <code>refs/personal/&lt;devname>/*</code>); подробное описание этой функциональности есть в документации.</p><h3 id=шаблонные-репозитории class="relative group">&ldquo;Шаблонные&rdquo; репозитории <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d1%88%d0%b0%d0%b1%d0%bb%d0%be%d0%bd%d0%bd%d1%8b%d0%b5-%d1%80%d0%b5%d0%bf%d0%be%d0%b7%d0%b8%d1%82%d0%be%d1%80%d0%b8%d0%b8 aria-label=Якорь>#</a></span></h3><p>Gitolite позволяет указывать репозитории с помощью шаблонов (на самом деле регулярных выражений Perl&rsquo;а), таких как, например, <code>assignments/s[0-9][0-9]/a[0-9][0-9]</code>. Это позволяет назначать новый режим доступа (<code>C</code>), который позволяет пользователям создавать репозитории на основе подобных шаблонов, автоматически назначает владельцем пользователя, который создал репозиторий, позволяет ему раздавать <code>R</code> и <code>RW</code> права другим пользователям и т.п.</p><h3 id=другие-функции class="relative group">Другие функции <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%b4%d1%80%d1%83%d0%b3%d0%b8%d0%b5-%d1%84%d1%83%d0%bd%d0%ba%d1%86%d0%b8%d0%b8 aria-label=Якорь>#</a></span></h3><p>Мы закончим это обсуждение рассмотрением подборки других функций, все они и многие другие описаны в мельчайших подробностях в документации.</p><p><strong>Логирование</strong>: Gitolite регистрирует все успешные действия. Если вы несколько легкомысленно раздали людям права на откатывание изменений (<code>RW+</code>) и кто-то снёс <code>master</code>, лог-файл спасёт вам жизнь, и вы легко и быстро найдёте потерянный SHA.</p><p><strong>Уведомление о правах доступа</strong>: Другая удобная функция проявляется в момент, когда вы просто проверяете и заходите по ssh на сервер. Gitolite показывает, к каким репозиториям у вас есть доступ и какого типа доступ может быть получен. Вот пример:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>    hello scott, this is git@git running gitolite3 v3.01-18-g9609868 on git 1.7.4.4
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>         R     anu-wsd
</span></span><span style=display:flex><span>         R     entrans
</span></span><span style=display:flex><span>         R  W  git-notes
</span></span><span style=display:flex><span>         R  W  gitolite
</span></span><span style=display:flex><span>         R  W  gitolite-admin
</span></span><span style=display:flex><span>         R     indic_web_input
</span></span><span style=display:flex><span>         R     shreelipi_converter
</span></span></code></pre></div><p><strong>Делегирование</strong>: При действительно больших установках вы можете делегировать ответственность за группы репозиториев различным людям, которые будут независимо управлять этими частями. Это уменьшает нагрузку на главного админа и делает его не таким критичным элементом.</p><p><strong>Зеркалирование</strong>: Gitolite может помочь вам поддерживать несколько зеркал, и легко переключаться между ними, если основной сервер упадёт.</p><h2 id=git-демон class="relative group">Git-демон <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#git-%d0%b4%d0%b5%d0%bc%d0%be%d0%bd aria-label=Якорь>#</a></span></h2><p>Для предоставления публичного неаутентифицируемого доступа на чтение к своим проектам стоит продвинуться дальше, чем протокол HTTP, и начать использовать Git-протокол. Основное его преимущество — скорость. Git-протокол гораздо эффективнее и следовательно быстрее чем HTTP, поэтому, используя его, вы можете сэкономить своим пользователям время.</p><p>Напомним, что он годится только для доступа на чтение без аутентификации. Если вы запустили его на сервере не загороженном сетевым экраном, то он должен использоваться только для проектов, которые публично видны внешнему миру. Если сервер, на котором вы его запускаете, находится за сетевым экраном, тогда его вполне можно использовать для проектов, к которым нужно иметь доступ только на чтение для большого числа людей или компьютеров (серверов непрерывной интеграции или сборки), если вы не хотите для каждого из них заводить свой SSH-ключ.</p><p>В любом случае, Git-протокол относительно просто настроить. По сути, вам нужно запустить следующую команду в демонизированной форме:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>git daemon --reuseaddr --base-path<span style=color:#f92672>=</span>/opt/git/ /opt/git/
</span></span></code></pre></div><p>Опция <code>--reuseaddr</code> позволит серверу перезапускаться без ожидания окончания старых соединений, <code>--base-path</code> позволит людям не указывать полный путь при клонировании проекта, а путь в конце говорит Git-демону, где искать экспортируемые репозитории. Если у вас запущен сетевой экран, то ещё необходимо проделать в нём дырочку, открыв порт 9418 на машине, на которой это всё запущено.</p><p>Вы можете демонизировать этот процесс несколькими путями, в зависимости от операционной системы. На машине с Ubuntu используйте Upstart-сценарий. Итак, в этот файл</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>/etc/event.d/local-git-daemon
</span></span></code></pre></div><p>поместите такой сценарий:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>start on startup
</span></span><span style=display:flex><span>stop on shutdown
</span></span><span style=display:flex><span>exec /usr/bin/git daemon <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>    --user<span style=color:#f92672>=</span>git --group<span style=color:#f92672>=</span>git <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>    --reuseaddr <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>    --base-path<span style=color:#f92672>=</span>/opt/git/ <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span>    /opt/git/
</span></span><span style=display:flex><span>respawn
</span></span></code></pre></div><p>По соображениям безопасности крайне желательно, чтобы вы запускали этот демон от пользователя с правами только на чтение на репозитории — вы легко можете сделать это, создав пользователя &lsquo;git-ro&rsquo; и запустив этот демон из-под него. Для простоты мы запустим его от того же пользователя &lsquo;git&rsquo;, от которого запущен Gitosis.</p><p>Когда вы перезапустите машину, Git-демон запустится автоматически, и возродится, если вдруг завершится. Чтобы запустить его без перезагрузки машины, выполните следующее:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>initctl start local-git-daemon
</span></span></code></pre></div><p>На других системах вы можете использовать <code>xinetd</code>, сценарий для системы <code>sysvinit</code>, или что-то другое — главное, чтобы вы могли эту команду как-либо демонизировать и перезапускать в случае завершения.</p><p>Затем, вы должны указать Gitosis-серверу, к каким репозиториям предоставить неаутентифицируемый доступ через Git-сервер. Если вы добавили по секции для каждого репозитория, вы можете указать, из каких из них Git-демону позволено читать. Если вы хотите предоставить доступ по Git-протоколу к <code>iphone_project</code>, добавьте следующее в конец своего файла <code>gitosis.conf</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>repo iphone_project<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>daemon <span style=color:#f92672>=</span> yes
</span></span></code></pre></div><p>Когда это зафиксировано и отправлено, ваш запущенный демон должен начать обслуживать запросы к проекту от всех, у кого есть доступ к порту 9418 на вашем сервере.</p><p>Если вы решили не использовать Gitosis, но хотите установить Git-демон, вам необходимо выполнить следующее в каждом проекте, который должен обслуживаться Git-демоном:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ cd /path/to/project.git
</span></span><span style=display:flex><span>$ touch git-daemon-export-ok
</span></span></code></pre></div><p>Наличие этого файла скажет Git&rsquo;у, что этот проект можно обслуживать без аутентификации.</p><p>Gitosis также может контролировать, какие проекты будет показывать GitWeb. Вам нужно добавить что-то вроде этого в файл <code>/etc/gitweb.conf</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$projects_list <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/home/git/gitosis/projects.list&#34;</span>;
</span></span><span style=display:flex><span>$projectroot <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/home/git/repositories&#34;</span>;
</span></span><span style=display:flex><span>$export_ok <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;git-daemon-export-ok&#34;</span>;
</span></span><span style=display:flex><span>@git_base_url_list <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#e6db74>&#39;git://gitserver&#39;</span><span style=color:#f92672>)</span>;
</span></span></code></pre></div><p>Вы можете контролировать, какие проекты GitWeb будет позволять просматривать пользователям, добавляя или удаляя пункт настройки <code>gitweb</code> в конфигурационном файле Gitosis&rsquo;а. Например, если вы хотите, чтобы <code>iphone_project</code> просматривался в GitWeb, сделайте так, чтобы секция настроек <code>repo</code> выглядела следующим образом:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>repo iphone_project<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>daemon <span style=color:#f92672>=</span> yes
</span></span><span style=display:flex><span>gitweb <span style=color:#f92672>=</span> yes
</span></span></code></pre></div><p>Теперь, если вы зафиксируете и отправите изменения, GitWeb автоматически начнёт показывать ваш проект для iphone.</p><h2 id=git-хостинг class="relative group">Git-хостинг <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#git-%d1%85%d0%be%d1%81%d1%82%d0%b8%d0%bd%d0%b3 aria-label=Якорь>#</a></span></h2><p>Если вы не хотите связываться со всей работой по установке собственного Git-сервера, у вас есть несколько вариантов размещения ваших Git-проектов на внешних специальных хостинг сайтах. Это предоставляет множество преимуществ: на хостинг сайте обычно быстро настроить и запустить проект и нет никакого мониторинга или поддержки сервера. Даже если вы установили и запустили свой собственный внутренний сервер, вы можете захотеть использовать публичный хостинг сайт для вашего открытого кода — обычно сообществу открытого кода так будет проще вас найти и помочь.</p><p>В наши дни у вас есть огромное количество вариантов хостинга на выбор, все со своими преимуществами и недостатками. Актуальный список можно найти на следующей странице:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>https://git.wiki.kernel.org/index.php/GitHosting
</span></span></code></pre></div><p>Поскольку мы не можем рассмотреть их все, и поскольку я работаю на один из них, мы в этом разделе рассмотрим процесс создания учётной записи и нового проекта на GitHub&rsquo;е. Это даст вам представление о вовлечённых в него вещах.</p><p>GitHub — крупнейший на сегодняшний день сайт, предоставляющий Git-хостинг для проектов с открытым исходным кодом, а также один из немногих, предоставляющих одновременно и публичный, и приватный хостинг, так что вы можете хранить ваш открытый и коммерческий код в одном месте. На самом деле, мы использовали GitHub, чтобы закрыто совместно писать эту книгу (прим. переводчика: и открыто переводить после её издания).</p><h3 id=github class="relative group">GitHub <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#github aria-label=Якорь>#</a></span></h3><p>GitHub немного отличается от других хостингов кода способом группировки проектов. Вместо того, чтобы брать за основу проекты, GitHub ориентируется на пользователей. Это значит, что если я размещаю свой проект <code>grit</code> на GitHub&rsquo;е, вы не найдёте его в <code>github.com/grit</code>, он будет в <code>github.com/schacon/grit</code>. Здесь нет никакой канонической версии проекта, что позволяет проектам беспрепятственно переходить от одного пользователя к другому, если начальный автор забросил проект.</p><p>GitHub — это коммерческая компания, которая взимает плату с учётных записей, использующих приватные репозитории, но любой может хоть сейчас получить бесплатную учётную запись и разместить сколько ему угодно открытых проектов. Мы быстро рассмотрим, как это делается.</p><h3 id=настройка-учётной-записи class="relative group">Настройка учётной записи <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-%d1%83%d1%87%d1%91%d1%82%d0%bd%d0%be%d0%b9-%d0%b7%d0%b0%d0%bf%d0%b8%d1%81%d0%b8 aria-label=Якорь>#</a></span></h3><p>Первое, что вам нужно сделать, это настроить учётную запись. Если вы посетите страницу Plans & Pricing по адресу <code>http://github.com/plans</code> и нажмёте на кнопку &ldquo;Create a free account&rdquo; (см. рисунок 4-2), вы попадёте на страницу регистрации.</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0402-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-2. Страница тарифных планов на GitHub&rsquo;е.</p></blockquote><p>Здесь вы должны выбрать имя пользователя, которое ещё не занято в системе, ввести адрес электронной почты, который будет сопоставлен аккаунту, и пароль (см. рис. 4-3).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0403-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-3. Страница регистрации пользователя на GitHub&rsquo;е.</p></blockquote><p>Если есть возможность, сейчас также самое время добавить свой открытый SSH-ключ. Мы рассмотрели, как создать ключ, ранее, в разделе &ldquo;Создание открытого SSH-ключа&rdquo;. Возьмите содержимое открытого ключа из своей пары и вставьте в поле для ввода открытого SSH-ключа. Ссылка &ldquo;explain ssh keys&rdquo; направит вас к подробным инструкциям о том, как это сделать на всех основных операционных системах.
Нажатие на кнопку &ldquo;I agree, sign me up&rdquo; откроет инструментальную панель вашего нового пользователя (см. рис. 4-4).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0404-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-4. Инструментальная панель на GitHub&rsquo;е.</p></blockquote><p>После этого вы можете создать новый репозиторий.</p><h3 id=создание-нового-репозитория class="relative group">Создание нового репозитория <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bd%d0%be%d0%b2%d0%be%d0%b3%d0%be-%d1%80%d0%b5%d0%bf%d0%be%d0%b7%d0%b8%d1%82%d0%be%d1%80%d0%b8%d1%8f aria-label=Якорь>#</a></span></h3><p>Начните с нажатия на &ldquo;New repository&rdquo; рядом с разделом &ldquo;Your Repositories&rdquo; на странице инструментальной панели. Вы попадёте к форме для создания нового репозитория (см. рис. 4-5).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0405-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-5. Создание нового репозитория на GitHub&rsquo;е.</p></blockquote><p>Единственное, что вам обязательно нужно сделать, это указать имя проекта, но вы также можете добавить и описание. Когда сделаете это, нажмите на кнопку &ldquo;Create Repository&rdquo;. Теперь у вас есть новый репозиторий на GitHub&rsquo;е (см. рис. 4-6).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0406-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-6. Заглавная информация проекта GitHub.</p></blockquote><p>Поскольку у вас ещё нет кода, GitHub покажет вам инструкцию, как создать совершенно новый проект, отправить существующий или импортировать проект из публичного репозитория Subversion (см. рис. 4-7).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0407-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-7. Инструкции для нового репозитория.</p></blockquote><p>Эти инструкции похожи на то, что мы проходили раньше. Чтобы инициализировать проект, если это ещё не Git-проект, используйте:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git init
</span></span><span style=display:flex><span>$ git add .
</span></span><span style=display:flex><span>$ git commit -m <span style=color:#e6db74>&#39;initial commit&#39;</span>
</span></span></code></pre></div><p>Если у вас есть локальный Git-репозиторий, добавьте GitHub как удалённый сервер и отправьте туда свою ветку master:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ git remote add origin git@github.com:testinguser/iphone_project.git
</span></span><span style=display:flex><span>$ git push origin master
</span></span></code></pre></div><p>Теперь ваш проект размещён на GitHub&rsquo;е, и вы можете дать ссылку на него любому, с кем вы захотите разделить проект. В этом случае, это <code>http://github.com/testinguser/iphone_project</code>. Вы также можете видеть в заголовке каждой страницы проекта, что у вас две Git-ссылки (см. рис. 4-8).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0408-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-8. Заголовок проекта с публичной и приватной ссылками.</p></blockquote><p>Ссылка &ldquo;Public Clone URL&rdquo; — это публичная ссылка только для чтения, через которую кто угодно может склонировать проект. Можете опубликовать эту ссылку или разместить её на своём сайте — где угодно.</p><p>&ldquo;Your Clone URL&rdquo; — это SSH-ссылка на чтение и запись, через которую вы можете читать и писать только в том случае, если вы подключаетесь с использованием секретного ключа из пары открытого SSH-ключа, загруженного в вашу учётную запись. Если другие пользователи посетят страницу этого проекта, они не увидят этой ссылки — только публичную.</p><h3 id=импорт-из-subversion class="relative group">Импорт из Subversion <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%b8%d0%bc%d0%bf%d0%be%d1%80%d1%82-%d0%b8%d0%b7-subversion aria-label=Якорь>#</a></span></h3><p>Если у вас есть существующий публичный Subversion-проект, который вы хотите импортировать в Git, GitHub часто может сделать это за вас. Внизу страницы инструкций есть ссылка на импорт из Subversion. Если вы кликнете по ней, вы увидите форму с информацией о процессе импорта и текстовое поле, где вы можете вставить ссылку на ваш публичный Subversion-проект (см. рис. 4-9).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0409-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-9. Интерфейс импорта из Subversion.</p></blockquote><p>Если ваш проект очень большой, нестандартный или приватный, этот процесс, возможно, не сработает для вас.</p><h3 id=добавление-участников class="relative group">Добавление участников <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%b4%d0%be%d0%b1%d0%b0%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d0%b5-%d1%83%d1%87%d0%b0%d1%81%d1%82%d0%bd%d0%b8%d0%ba%d0%be%d0%b2 aria-label=Якорь>#</a></span></h3><p>Давайте добавим остальную команду. Если Джон, Джози и Джессика зарегистрированы на GitHub&rsquo;е, и вы хотите дать им доступ на отправку изменений в свой репозиторий, вы можете добавить их в свой проект как участников. Это позволит им отправлять изменения, используя свои открытые ключи.</p><p>Нажмите на кнопку &ldquo;edit&rdquo; в заголовке проекта или вкладку &ldquo;Admin&rdquo; вверху, чтобы попасть на страницу администратора вашего проекта на GitHub&rsquo;е (см. рис. 4-10).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0410-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-10. Страница администратора на GitHub&rsquo;е.</p></blockquote><p>Чтобы дать другому пользователю доступ на запись в проект, кликните по ссылке “Add another collaborator”. Появится новое текстовое поле, в котором вы можете набрать имя пользователя. По мере набора всплывёт подсказка, показывающая возможные совпадения имён. Когда найдёте нужного пользователя, нажмите на кнопку Add, чтобы добавить пользователя как участника вашего проекта (см. рис. 4-11).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0411-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-11. Добавление участника в проект.</p></blockquote><p>Когда закончите добавлять участников, вы должны увидеть их список в разделе Repository Collaborators (см. рис. 4-12).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0412-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-12. Список участников вашего проекта.</p></blockquote><p>Если вам нужно отозвать чей-то доступ, можете кликнуть по ссылке &ldquo;revoke&rdquo;, и его доступ на отправку будет удалён. Для будущих проектов вы также можете скопировать группы участников, скопировав права доступа из существующего проекта.</p><h3 id=ваш-проект class="relative group">Ваш проект <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%b2%d0%b0%d1%88-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82 aria-label=Якорь>#</a></span></h3><p>После того как вы отправили ваш проект или импортировали его из Subversion, у вас есть главная страница проекта, которая выглядит как на рис. 4-13.</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0413-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-13. Главная страница проекта на GitHub&rsquo;е.</p></blockquote><p>Когда люди посещают ваш проект, они видят эту страницу. Она содержит вкладки, касающиеся различных аспектов вашего проекта. Вкладка Commits показывает список коммитов в обратном хронологическом порядке наподобие вывода команды <code>git log</code>. Вкладка Network показывает всех людей, отделивших ваш проект и вернувших свои наработки. Вкладка Downloads позволяет выложить бинарные файлы проекта и ссылки на архивы каких-нибудь отмеченных точек проекта. Вкладка Wiki предоставляет вики, где вы можете написать документацию или другую информацию о своём проекте. Вкладка Graphs показывает некоторую информацию о вкладе участников и статистику проекта. Главная вкладка Source показывает листинг корневого каталога проекта и автоматически выводит под ним содержимое файла README, если он у вас есть. Эта вкладка также показывает информацию о последнем коммите.</p><h3 id=ответвления-проектов class="relative group">Ответвления проектов <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%be%d1%82%d0%b2%d0%b5%d1%82%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d1%8f-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d0%be%d0%b2 aria-label=Якорь>#</a></span></h3><p>Если вы хотите внести вклад в существующий проект, на отправку изменений в который у вас нет прав, GitHub приветствует ответвления. Когда вы смотрите на страницу заинтересовавшего вас проекта и хотите немного поработать над ним, вы можете нажать на кнопку &ldquo;Fork&rdquo; в заголовке проекта, чтобы GitHub скопировал проект вашему пользователю, и вы смогли отправлять туда свои изменения.</p><p>Таким образом, проектам не нужно беспокоиться о добавлении пользователей в качестве участников для предоставления им доступа на отправку изменений. Люди могут ответвить проект и отправлять изменения в свою копию. А мейнтейнер главного проекта может вернуть эти изменения, добавляя форки как удалённые серверы и сливая из них наработки.</p><p>Чтобы ответвить проект, посетите страницу проекта (в нашем случае mojombo/chronic) и нажмите на кнопку &ldquo;Fork&rdquo; в его заголовке (см. рис. 4-14).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0414-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-14. Получение доступной для записи копии любого репозитория.</p></blockquote><p>Через несколько секунд вы будете направлены на страницу своего нового проекта, на которой указано, что данный проект является ответвлением другого проекта (см. рис. 4-15).</p><p><figure><img src=https://raw.githubusercontent.com/progit/progit/master/figures/18333fig0415-tn.png alt class="mx-auto my-0 rounded-md"></figure></p><blockquote><p>Рисунок 4-15. Вы ответвили проект.</p></blockquote><h3 id=заключение-о-github class="relative group">Заключение о GitHub <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%b7%d0%b0%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%be-github aria-label=Якорь>#</a></span></h3><p>Это всё, что мы хотели бы рассказать про GitHub, но важно отметить, как быстро вы можете всё сделать. Вы можете создать аккаунт, добавить новый проект и отправить изменения в него за минуты. Если ваш проект с открытым исходным кодом, вы также получите огромное сообщество разработчиков, которые смогут увидеть ваш проект, ответвить его и внести в него свой вклад. Во всяком случае, это хороший способ получить готовую к работе с Git&rsquo;ом среду, чтобы быстренько испытать его в деле.</p><h2 id=итоги class="relative group">Итоги <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%d0%b8%d1%82%d0%be%d0%b3%d0%b8 aria-label=Якорь>#</a></span></h2><p>У вас есть несколько вариантов получения удалённого Git-репозитория так, чтобы вы могли принимать участие в проекте вместе с другими или поделиться работой.</p><p>Запуск своего сервера даёт полный контроль и позволяет запускать сервер за вашим сетевым экраном, но такой сервер обычно требует значительной части вашего времени на настройку и поддержку. Если вы разместите ваши данные на хостинге, его просто настроить и поддерживать; однако вам необходимо иметь возможность хранить код на чужом сервере, а некоторые организации этого не позволяют.</p><p>Выбор решения или комбинации решений, которые подойдут вам и вашей организации, не должен вызвать затруднений.</p></div></section><footer class="max-w-prose pt-8 print:hidden"><div class=flex><picture class="!mb-0 !mt-0 me-4 w-24 h-auto rounded-full"><img width=400 height=400 class="!mb-0 !mt-0 me-4 w-24 h-auto rounded-full" alt="Андрей Куманяев" loading=lazy decoding=async src=https://zzet.org/img/author.jpeg></picture><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Автор</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Андрей Куманяев</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://twitter.com/username target=_blank aria-label=Twitter rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://github.com/zzet target=_blank aria-label=Github rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://x.com/zzetorg target=_blank aria-label=X rel="me noopener noreferrer"></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://www.reddit.com/user/zzet/ target=_blank aria-label=Reddit rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://www.linkedin.com/in/andrey-kumanyaev/ target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a></div></div></div></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/&amp;quote=Git.%20%d0%9f%d1%80%d0%be%d1%81%d1%82%d0%be%20Git.%20%d0%9b%d0%b5%d0%ba%d1%86%d0%b8%d1%8f%204.%20Git%20%d0%bd%d0%b0%20%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5." title="Поделиться на Facebook" aria-label="Поделиться на Facebook" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://x.com/intent/tweet/?url=https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/&amp;text=Git.%20%d0%9f%d1%80%d0%be%d1%81%d1%82%d0%be%20Git.%20%d0%9b%d0%b5%d0%ba%d1%86%d0%b8%d1%8f%204.%20Git%20%d0%bd%d0%b0%20%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5." title="Post on X" aria-label="Post on X" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://tootpick.org/#text=https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/%20Git.%20%d0%9f%d1%80%d0%be%d1%81%d1%82%d0%be%20Git.%20%d0%9b%d0%b5%d0%ba%d1%86%d0%b8%d1%8f%204.%20Git%20%d0%bd%d0%b0%20%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5." title="Поделиться на Mastodon" aria-label="Поделиться на Mastodon" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/&amp;resubmit=true&amp;title=Git.%20%d0%9f%d1%80%d0%be%d1%81%d1%82%d0%be%20Git.%20%d0%9b%d0%b5%d0%ba%d1%86%d0%b8%d1%8f%204.%20Git%20%d0%bd%d0%b0%20%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5." title="Опубликовать на Reddit" aria-label="Опубликовать на Reddit" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/&amp;title=Git.%20%d0%9f%d1%80%d0%be%d1%81%d1%82%d0%be%20Git.%20%d0%9b%d0%b5%d0%ba%d1%86%d0%b8%d1%8f%204.%20Git%20%d0%bd%d0%b0%20%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5." title="Поделиться на LinkedIn" aria-label="Поделиться на LinkedIn" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/&amp;subject=Git.%20%d0%9f%d1%80%d0%be%d1%81%d1%82%d0%be%20Git.%20%d0%9b%d0%b5%d0%ba%d1%86%d0%b8%d1%8f%204.%20Git%20%d0%bd%d0%b0%20%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5." title="Послать через email" aria-label="Послать через email" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.threads.net/intent/post?text=https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/%20Git.%20%d0%9f%d1%80%d0%be%d1%81%d1%82%d0%be%20Git.%20%d0%9b%d0%b5%d0%ba%d1%86%d0%b8%d1%8f%204.%20Git%20%d0%bd%d0%b0%20%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5." title="Post on Threads" aria-label="Post on Threads" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M331.5 235.7c2.2.9 4.2 1.9 6.3 2.8 29.2 14.1 50.6 35.2 61.8 61.4 15.7 36.5 17.2 95.8-30.3 143.2-36.2 36.2-80.3 52.5-142.6 53h-.3c-70.2-.5-124.1-24.1-160.4-70.2-32.3-41-48.9-98.1-49.5-169.6V256v-.2C17 184.3 33.6 127.2 65.9 86.2 102.2 40.1 156.2 16.5 226.4 16h.3c70.3.5 124.9 24 162.3 69.9 18.4 22.7 32 50 40.6 81.7l-40.4 10.8c-7.1-25.8-17.8-47.8-32.2-65.4-29.2-35.8-73-54.2-130.5-54.6-57 .5-100.1 18.8-128.2 54.4C72.1 146.1 58.5 194.3 58 256c.5 61.7 14.1 109.9 40.3 143.3 28 35.6 71.2 53.9 128.2 54.4 51.4-.4 85.4-12.6 113.7-40.9 32.3-32.2 31.7-71.8 21.4-95.9-6.1-14.2-17.1-26-31.9-34.9-3.7 26.9-11.8 48.3-24.7 64.8-17.1 21.8-41.4 33.6-72.7 35.3-23.6 1.3-46.3-4.4-63.9-16-20.8-13.8-33-34.8-34.3-59.3-2.5-48.3 35.7-83 95.2-86.4 21.1-1.2 40.9-.3 59.2 2.8-2.4-14.8-7.3-26.6-14.6-35.2-10-11.7-25.6-17.7-46.2-17.8H227c-16.6.0-39 4.6-53.3 26.3l-34.4-23.6c19.2-29.1 50.3-45.1 87.8-45.1h.8c62.6.4 99.9 39.5 103.7 107.7l-.2.2zm-156 68.8c1.3 25.1 28.4 36.8 54.6 35.3 25.6-1.4 54.6-11.4 59.5-73.2-13.2-2.9-27.8-4.4-43.4-4.4-4.8.0-9.6.1-14.4.4-42.9 2.4-57.2 23.2-56.2 41.8l-.1.1z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://telegram.me/share/url?text=https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/&amp;url=Git.%20%d0%9f%d1%80%d0%be%d1%81%d1%82%d0%be%20Git.%20%d0%9b%d0%b5%d0%ba%d1%86%d0%b8%d1%8f%204.%20Git%20%d0%bd%d0%b0%20%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b5." title="Поделиться на Telegram" aria-label="Поделиться на Telegram" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111.033 8 0 119.033.0 256S111.033 504 248 504 496 392.967 496 256 384.967 8 248 8zM362.952 176.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452.0 013.53 6.716A43.765 43.765.0 01362.952 176.66z"/></svg></span></a></section><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="group flex" href=https://zzet.org/ru/archive/2014-04-04-lection-5-git-course-undev/><span class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&larr;</span><span class="ltr:hidden rtl:inline">&rarr;</span></span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Git. Просто Git. Лекция 5. Git изнутри.</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2014-03-28 00:00:00 +0000 UTC">28 марта 2014 г.</time>
</span></span></a></span><span><a class="group flex text-right" href=https://zzet.org/ru/archive/2017-10-29-project-configuration-railsclub-intro/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Project configuration. Part 1. Railsclub intro.</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2017-10-29 00:00:00 +0000 UTC">29 октября 2017 г.</time>
</span></span><span class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[-2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&rarr;</span><span class="ltr:hidden rtl:inline">&larr;</span></span></a></span></div></div></footer></article></main><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12" id=to-top hidden=true><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label=Вверх title=Вверх>&uarr;</a></div><footer class="py-10 print:hidden"><nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex list-none flex-col sm:flex-row"><li class="group mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a href=/ru/archive/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Архив</span></a></li></ul></nav><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2026
Андрей Куманяев</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Работает на <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://github.com/jpanther/congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="flex flex-row items-center"><div><div class="group relative"><button class="group-dark:hover:text-primary-400 flex w-full items-center justify-end transition-colors group-hover:text-primary-600">
<span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 16 16"><path fill="currentColor" d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286H4.545zm1.634-.736L5.5 3.956h-.049l-.679 2.022H6.18z"/><path fill="currentColor" d="M0 2a2 2 0 012-2h7a2 2 0 012 2v3h3a2 2 0 012 2v7a2 2 0 01-2 2H7a2 2 0 01-2-2v-3H2A2 2 0 010 9V2zm2-1A1 1 0 001 2v7a1 1 0 001 1h7a1 1 0 001-1V2A1 1 0 009 1H2zm7.138 9.995c.193.301.402.583.63.846-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6.066 6.066.0 01-.415-.492 1.988 1.988.0 01-.94.31z"/></svg>
</span><span class=text-sm>RU</span><span class=text-[0.6rem]><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M233.4 105.4c12.5-12.5 32.8-12.5 45.3.0l192 192c12.5 12.5 12.5 32.8.0 45.3s-32.8 12.5-45.3.0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3.0s-12.5-32.8.0-45.3l192-192z"/></svg></span></span></button><div class="bottom-7 invisible absolute z-50 flex flex-col whitespace-nowrap rounded border border-neutral-300 bg-neutral text-start text-base shadow group-hover:visible ltr:right-0 rtl:left-0 dark:border-neutral-600 dark:bg-neutral-800"><div class="flex flex-grow"><a href=https://zzet.org/archive/2014-03-28-lection-4-git-course-undev/ class="w-full py-1 pe-10 ps-2 decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2">English</a></div><div class="flex flex-grow"><a href=https://zzet.org/ru/archive/2014-03-28-lection-4-git-course-undev/ class="flex w-full items-center justify-between bg-primary-100 px-2 py-1 dark:bg-primary-900">Русский<span class="ms-2 w-6 text-primary-600 dark:text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M438.6 105.4c12.5 12.5 12.5 32.7.0 45.2l-256 256c-12.5 12.5-32.7 12.5-45.2.0L9.372 278.6c-12.496-12.5-12.496-32.7.0-45.2 12.498-12.5 32.758-12.5 45.258.0L159.1 338.7 393.4 105.4c12.5-12.52 32.7-12.52 45.2.0h0z"/></svg></span></span></a></div></div></div></div></div></div></footer></div></body></html>